
### @name getLatestEpochParamsBlockfrost
### Get latest epoch params from Blockfrost
GET https://cardano-preprod.blockfrost.io/api/v0/epochs/latest/parameters
project_id: preprodi9r9b9IQ5HIqRD5UuG0DDXIbWJqsJaWR

> {%
    // Save the response body to a global variable to use in the next request
    client.global.set("blockfrostLatestEpochParamsResponse", response.body);

    client.test("Get latest epoch parameters", function() {
        client.assert(response.status === 200, "Response status is not 200");
    });
%}


### @name getLatestEpochParamsYaci
### Get latest epoch params from Yaci Store
GET {{base_url}}/api/v1/blockfrost/epochs/latest/parameters

> {%
    // Retrieve the response from the first request
    const blockfrostLatestEpochResponse = client.global.get("blockfrostLatestEpochParamsResponse");
    const yaciLatestEpochParamsResponse = response.body;

    client.test("Compare specific epoch with latest", function() {
        client.assert(response.status === 200, "Response status is not 200");


        // Basic protocol parameters
        client.assert(blockfrostLatestEpochResponse.epoch === yaciLatestEpochParamsResponse.epoch, `epoch is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.epoch}, Yaci: ${yaciLatestEpochParamsResponse.epoch})`);
        client.assert(blockfrostLatestEpochResponse.min_fee_a === yaciLatestEpochParamsResponse.min_fee_a, `min_fee_a is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.min_fee_a}, Yaci: ${yaciLatestEpochParamsResponse.min_fee_a})`);
        client.assert(blockfrostLatestEpochResponse.min_fee_b === yaciLatestEpochParamsResponse.min_fee_b, `min_fee_b is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.min_fee_b}, Yaci: ${yaciLatestEpochParamsResponse.min_fee_b})`);
        client.assert(blockfrostLatestEpochResponse.max_block_size === yaciLatestEpochParamsResponse.max_block_size, `max_block_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_block_size}, Yaci: ${yaciLatestEpochParamsResponse.max_block_size})`);
        client.assert(blockfrostLatestEpochResponse.max_tx_size === yaciLatestEpochParamsResponse.max_tx_size, `max_tx_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_tx_size}, Yaci: ${yaciLatestEpochParamsResponse.max_tx_size})`);
        client.assert(blockfrostLatestEpochResponse.max_block_header_size === yaciLatestEpochParamsResponse.max_block_header_size, `max_block_header_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_block_header_size}, Yaci: ${yaciLatestEpochParamsResponse.max_block_header_size})`);
        client.assert(blockfrostLatestEpochResponse.key_deposit === yaciLatestEpochParamsResponse.key_deposit, `key_deposit is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.key_deposit}, Yaci: ${yaciLatestEpochParamsResponse.key_deposit})`);
        client.assert(blockfrostLatestEpochResponse.pool_deposit === yaciLatestEpochParamsResponse.pool_deposit, `pool_deposit is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pool_deposit}, Yaci: ${yaciLatestEpochParamsResponse.pool_deposit})`);
        client.assert(blockfrostLatestEpochResponse.a0 === yaciLatestEpochParamsResponse.a0, `a0 is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.a0}, Yaci: ${yaciLatestEpochParamsResponse.a0})`);
        client.assert(blockfrostLatestEpochResponse.rho === yaciLatestEpochParamsResponse.rho, `rho is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.rho}, Yaci: ${yaciLatestEpochParamsResponse.rho})`);
        client.assert(blockfrostLatestEpochResponse.tau === yaciLatestEpochParamsResponse.tau, `tau is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.tau}, Yaci: ${yaciLatestEpochParamsResponse.tau})`);
        client.assert(blockfrostLatestEpochResponse.protocol_major_ver === yaciLatestEpochParamsResponse.protocol_major_ver, `protocol_major_ver is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.protocol_major_ver}, Yaci: ${yaciLatestEpochParamsResponse.protocol_major_ver})`);
        client.assert(blockfrostLatestEpochResponse.protocol_minor_ver === yaciLatestEpochParamsResponse.protocol_minor_ver, `protocol_minor_ver is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.protocol_minor_ver}, Yaci: ${yaciLatestEpochParamsResponse.protocol_minor_ver})`);
        client.assert(blockfrostLatestEpochResponse.min_pool_cost === yaciLatestEpochParamsResponse.min_pool_cost, `min_pool_cost is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.min_pool_cost}, Yaci: ${yaciLatestEpochParamsResponse.min_pool_cost})`);

        // Cost models - only compare array sizes
        client.assert(blockfrostLatestEpochResponse.cost_models_raw.PlutusV1.length === yaciLatestEpochParamsResponse.cost_models_raw.PlutusV1.length, `PlutusV1 cost_models_raw array size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.cost_models_raw.PlutusV1.length}, Yaci: ${yaciLatestEpochParamsResponse.cost_models_raw.PlutusV1.length})`);
        client.assert(blockfrostLatestEpochResponse.cost_models_raw.PlutusV2.length === yaciLatestEpochParamsResponse.cost_models_raw.PlutusV2.length, `PlutusV2 cost_models_raw array size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.cost_models_raw.PlutusV2.length}, Yaci: ${yaciLatestEpochParamsResponse.cost_models_raw.PlutusV2.length})`);
        client.assert(blockfrostLatestEpochResponse.cost_models_raw.PlutusV3.length === yaciLatestEpochParamsResponse.cost_models_raw.PlutusV3.length, `PlutusV3 cost_models_raw array size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.cost_models_raw.PlutusV3.length}, Yaci: ${yaciLatestEpochParamsResponse.cost_models_raw.PlutusV3.length})`);

        // Execution limits
        client.assert(blockfrostLatestEpochResponse.price_mem === yaciLatestEpochParamsResponse.price_mem, `price_mem is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.price_mem}, Yaci: ${yaciLatestEpochParamsResponse.price_mem})`);
        client.assert(blockfrostLatestEpochResponse.price_step === yaciLatestEpochParamsResponse.price_step, `price_step is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.price_step}, Yaci: ${yaciLatestEpochParamsResponse.price_step})`);

        //TODO: Needs to be fixed in core calculations
        //client.assert(blockfrostLatestEpochResponse.max_tx_ex_mem === yaciLatestEpochParamsResponse.max_tx_ex_mem, `max_tx_ex_mem is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_tx_ex_mem}, Yaci: ${yaciLatestEpochParamsResponse.max_tx_ex_mem})`);

        client.assert(blockfrostLatestEpochResponse.max_tx_ex_steps === yaciLatestEpochParamsResponse.max_tx_ex_steps, `max_tx_ex_steps is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_tx_ex_steps}, Yaci: ${yaciLatestEpochParamsResponse.max_tx_ex_steps})`);

        //TODO: Needs to be fixed in core calculations
        //client.assert(blockfrostLatestEpochResponse.max_block_ex_mem === yaciLatestEpochParamsResponse.max_block_ex_mem, `max_block_ex_mem is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_block_ex_mem}, Yaci: ${yaciLatestEpochParamsResponse.max_block_ex_mem})`);

        client.assert(blockfrostLatestEpochResponse.max_block_ex_steps === yaciLatestEpochParamsResponse.max_block_ex_steps, `max_block_ex_steps is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_block_ex_steps}, Yaci: ${yaciLatestEpochParamsResponse.max_block_ex_steps})`);
        client.assert(blockfrostLatestEpochResponse.max_val_size === yaciLatestEpochParamsResponse.max_val_size, `max_val_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_val_size}, Yaci: ${yaciLatestEpochParamsResponse.max_val_size})`);
        client.assert(blockfrostLatestEpochResponse.collateral_percent === yaciLatestEpochParamsResponse.collateral_percent, `collateral_percent is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.collateral_percent}, Yaci: ${yaciLatestEpochParamsResponse.collateral_percent})`);
        client.assert(blockfrostLatestEpochResponse.max_collateral_inputs === yaciLatestEpochParamsResponse.max_collateral_inputs, `max_collateral_inputs is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.max_collateral_inputs}, Yaci: ${yaciLatestEpochParamsResponse.max_collateral_inputs})`);
        client.assert(blockfrostLatestEpochResponse.coins_per_utxo_size === yaciLatestEpochParamsResponse.coins_per_utxo_size, `coins_per_utxo_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.coins_per_utxo_size}, Yaci: ${yaciLatestEpochParamsResponse.coins_per_utxo_size})`);

        // Governance - Pool voting thresholds
        client.assert(blockfrostLatestEpochResponse.pvt_motion_no_confidence === yaciLatestEpochParamsResponse.pvt_motion_no_confidence, `pvt_motion_no_confidence is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvt_motion_no_confidence}, Yaci: ${yaciLatestEpochParamsResponse.pvt_motion_no_confidence})`);
        client.assert(blockfrostLatestEpochResponse.pvt_committee_normal === yaciLatestEpochParamsResponse.pvt_committee_normal, `pvt_committee_normal is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvt_committee_normal}, Yaci: ${yaciLatestEpochParamsResponse.pvt_committee_normal})`);
        client.assert(blockfrostLatestEpochResponse.pvt_committee_no_confidence === yaciLatestEpochParamsResponse.pvt_committee_no_confidence, `pvt_committee_no_confidence is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvt_committee_no_confidence}, Yaci: ${yaciLatestEpochParamsResponse.pvt_committee_no_confidence})`);
        client.assert(blockfrostLatestEpochResponse.pvt_hard_fork_initiation === yaciLatestEpochParamsResponse.pvt_hard_fork_initiation, `pvt_hard_fork_initiation is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvt_hard_fork_initiation}, Yaci: ${yaciLatestEpochParamsResponse.pvt_hard_fork_initiation})`);

        // Governance - DRep voting thresholds
        client.assert(blockfrostLatestEpochResponse.dvt_motion_no_confidence === yaciLatestEpochParamsResponse.dvt_motion_no_confidence, `dvt_motion_no_confidence is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_motion_no_confidence}, Yaci: ${yaciLatestEpochParamsResponse.dvt_motion_no_confidence})`);
        client.assert(blockfrostLatestEpochResponse.dvt_committee_normal === yaciLatestEpochParamsResponse.dvt_committee_normal, `dvt_committee_normal is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_committee_normal}, Yaci: ${yaciLatestEpochParamsResponse.dvt_committee_normal})`);
        client.assert(blockfrostLatestEpochResponse.dvt_committee_no_confidence === yaciLatestEpochParamsResponse.dvt_committee_no_confidence, `dvt_committee_no_confidence is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_committee_no_confidence}, Yaci: ${yaciLatestEpochParamsResponse.dvt_committee_no_confidence})`);
        client.assert(blockfrostLatestEpochResponse.dvt_update_to_constitution === yaciLatestEpochParamsResponse.dvt_update_to_constitution, `dvt_update_to_constitution is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_update_to_constitution}, Yaci: ${yaciLatestEpochParamsResponse.dvt_update_to_constitution})`);
        client.assert(blockfrostLatestEpochResponse.dvt_hard_fork_initiation === yaciLatestEpochParamsResponse.dvt_hard_fork_initiation, `dvt_hard_fork_initiation is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_hard_fork_initiation}, Yaci: ${yaciLatestEpochParamsResponse.dvt_hard_fork_initiation})`);
        client.assert(blockfrostLatestEpochResponse.dvt_treasury_withdrawal === yaciLatestEpochParamsResponse.dvt_treasury_withdrawal, `dvt_treasury_withdrawal is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_treasury_withdrawal}, Yaci: ${yaciLatestEpochParamsResponse.dvt_treasury_withdrawal})`);

        // Governance - Committee and action parameters
        client.assert(blockfrostLatestEpochResponse.committee_min_size === yaciLatestEpochParamsResponse.committee_min_size, `committee_min_size is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.committee_min_size}, Yaci: ${yaciLatestEpochParamsResponse.committee_min_size})`);
        client.assert(blockfrostLatestEpochResponse.committee_max_term_length === yaciLatestEpochParamsResponse.committee_max_term_length, `committee_max_term_length is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.committee_max_term_length}, Yaci: ${yaciLatestEpochParamsResponse.committee_max_term_length})`);
        client.assert(blockfrostLatestEpochResponse.gov_action_lifetime === yaciLatestEpochParamsResponse.gov_action_lifetime, `gov_action_lifetime is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.gov_action_lifetime}, Yaci: ${yaciLatestEpochParamsResponse.gov_action_lifetime})`);

        //TODO: Needs to be fixed in core calculations
        //client.assert(blockfrostLatestEpochResponse.gov_action_deposit === yaciLatestEpochParamsResponse.gov_action_deposit, `gov_action_deposit is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.gov_action_deposit}, Yaci: ${yaciLatestEpochParamsResponse.gov_action_deposit})`);
        //client.assert(blockfrostLatestEpochResponse.drep_deposit === yaciLatestEpochParamsResponse.drep_deposit, `drep_deposit is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.drep_deposit}, Yaci: ${yaciLatestEpochParamsResponse.drep_deposit})`);

        client.assert(blockfrostLatestEpochResponse.drep_activity === yaciLatestEpochParamsResponse.drep_activity, `drep_activity is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.drep_activity}, Yaci: ${yaciLatestEpochParamsResponse.drep_activity})`);

        // Other parameters
        client.assert(blockfrostLatestEpochResponse.min_fee_ref_script_cost_per_byte === yaciLatestEpochParamsResponse.min_fee_ref_script_cost_per_byte, `min_fee_ref_script_cost_per_byte is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.min_fee_ref_script_cost_per_byte}, Yaci: ${yaciLatestEpochParamsResponse.min_fee_ref_script_cost_per_byte})`);
        client.assert(blockfrostLatestEpochResponse.e_max === yaciLatestEpochParamsResponse.e_max, `e_max is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.e_max}, Yaci: ${yaciLatestEpochParamsResponse.e_max})`);
        client.assert(blockfrostLatestEpochResponse.n_opt === yaciLatestEpochParamsResponse.n_opt, `n_opt is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.n_opt}, Yaci: ${yaciLatestEpochParamsResponse.n_opt})`);
        client.assert(blockfrostLatestEpochResponse.pvt_p_p_security_group === yaciLatestEpochParamsResponse.pvt_p_p_security_group, `pvt_p_p_security_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvt_p_p_security_group}, Yaci: ${yaciLatestEpochParamsResponse.pvt_p_p_security_group})`);
        client.assert(blockfrostLatestEpochResponse.dvt_p_p_network_group === yaciLatestEpochParamsResponse.dvt_p_p_network_group, `dvt_p_p_network_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_p_p_network_group}, Yaci: ${yaciLatestEpochParamsResponse.dvt_p_p_network_group})`);
        client.assert(blockfrostLatestEpochResponse.dvt_p_p_economic_group === yaciLatestEpochParamsResponse.dvt_p_p_economic_group, `dvt_p_p_economic_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_p_p_economic_group}, Yaci: ${yaciLatestEpochParamsResponse.dvt_p_p_economic_group})`);
        client.assert(blockfrostLatestEpochResponse.dvt_p_p_technical_group === yaciLatestEpochParamsResponse.dvt_p_p_technical_group, `dvt_p_p_technical_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_p_p_technical_group}, Yaci: ${yaciLatestEpochParamsResponse.dvt_p_p_technical_group})`);
        client.assert(blockfrostLatestEpochResponse.dvt_p_p_gov_group === yaciLatestEpochParamsResponse.dvt_p_p_gov_group, `dvt_p_p_gov_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.dvt_p_p_gov_group}, Yaci: ${yaciLatestEpochParamsResponse.dvt_p_p_gov_group})`);
        client.assert(blockfrostLatestEpochResponse.pvtpp_security_group === yaciLatestEpochParamsResponse.pvtpp_security_group, `pvtpp_security_group is different between blockfrost and yaci (Blockfrost: ${blockfrostLatestEpochResponse.pvtpp_security_group}, Yaci: ${yaciLatestEpochParamsResponse.pvtpp_security_group})`);


    });
%}


### @name getSpecificEpochParamsYaci
### Get specific epoch params from Yaci Store
GET {{base_url}}/api/v1/blockfrost/epochs/193/parameters
