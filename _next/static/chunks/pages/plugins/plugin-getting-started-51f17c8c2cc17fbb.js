(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{9823:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/plugins/plugin-getting-started",function(){return n(8952)}])},8952:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return o}});var i=n(5893),l=n(2673),r=n(4294),a=n(3209);n(4759);var t=n(2643);let o=[{depth:2,value:"Prerequisites",id:"prerequisites"},{depth:2,value:"Setup",id:"setup"},{depth:3,value:"1. Enable Plugin Support",id:"1-enable-plugin-support"},{depth:3,value:"2. Understanding the Plugin Directory Structure",id:"2-understanding-the-plugin-directory-structure"},{depth:3,value:"3. Plugin Configuration",id:"3-plugin-configuration"},{depth:2,value:"Understanding Plugin Types",id:"understanding-plugin-types"},{depth:2,value:"Plugin Languages",id:"plugin-languages"},{depth:2,value:"Your First Plugin: Filtering NFT Metadata",id:"your-first-plugin-filtering-nft-metadata"},{depth:3,value:"Method 1: Using Expressions (Simplest)",id:"method-1-using-expressions-simplest"},{depth:4,value:"MVEL Expression",id:"mvel-expression"},{depth:4,value:"SpEL Expression",id:"spel-expression"},{depth:3,value:"Method 2: Using Inline Scripts",id:"method-2-using-inline-scripts"},{depth:3,value:"Method 3: Using External Script Files",id:"method-3-using-external-script-files"},{depth:2,value:"Testing Your Plugin",id:"testing-your-plugin"},{depth:3,value:"Quick Start Configuration",id:"quick-start-configuration"},{depth:3,value:"Start Yaci-Store",id:"start-yaci-store"},{depth:3,value:"Verify Results",id:"verify-results"},{depth:2,value:"Example 2: Filtering High-Value UTXOs",id:"example-2-filtering-high-value-utxos"},{depth:3,value:"SpEL Expression (Recommended for simple filters)",id:"spel-expression-recommended-for-simple-filters"},{depth:3,value:"MVEL Expression with Multiple Conditions",id:"mvel-expression-with-multiple-conditions"},{depth:2,value:"Example 3: Filtering by Asset Policy",id:"example-3-filtering-by-asset-policy"},{depth:3,value:"SpEL with Collection Filtering",id:"spel-with-collection-filtering"},{depth:3,value:"MVEL with Custom Logic",id:"mvel-with-custom-logic"},{depth:2,value:"Pre-Action Plugins: Modifying Data",id:"pre-action-plugins-modifying-data"},{depth:3,value:"Example: Filter utxos with Specific PolicyId and Replace it with a custom label",id:"example-filter-utxos-with-specific-policyid-and-replace-it-with-a-custom-label"},{depth:2,value:"Post-Action Plugins: Notifications",id:"post-action-plugins-notifications"},{depth:3,value:"Example: Log High-Fee Transactions",id:"example-log-high-fee-transactions"},{depth:2,value:"Event Handler Plugins: Reacting to Events",id:"event-handler-plugins-reacting-to-events"},{depth:3,value:"Example: Block Processing Monitor",id:"example-block-processing-monitor"},{depth:2,value:"Common Extension Points",id:"common-extension-points"},{depth:3,value:"Storage Extension Points",id:"storage-extension-points"},{depth:3,value:"Event Types",id:"event-types"},{depth:2,value:"Tips for Success",id:"tips-for-success"},{depth:3,value:"1. Start Simple",id:"1-start-simple"},{depth:3,value:"2. Test Incrementally",id:"2-test-incrementally"},{depth:3,value:"3. Use Appropriate Field Names",id:"3-use-appropriate-field-names"},{depth:3,value:"4. Handle Null Values",id:"4-handle-null-values"},{depth:3,value:"5. Multiple Filters = AND Logic",id:"5-multiple-filters--and-logic"},{depth:2,value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid"},{depth:2,value:"Non-Docker Distribution",id:"non-docker-distribution"},{depth:2,value:"Troubleshooting",id:"troubleshooting"},{depth:3,value:"Plugin Not Working?",id:"plugin-not-working"},{depth:3,value:"Syntax Errors?",id:"syntax-errors"},{depth:2,value:"Next Steps",id:"next-steps"}];function c(e){let s=Object.assign({h1:"h1",p:"p",strong:"strong",h2:"h2",ul:"ul",li:"li",h3:"h3",code:"code",pre:"pre",span:"span",blockquote:"blockquote",h4:"h4",ol:"ol",a:"a"},(0,t.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{children:"Plugin Getting Started Guide"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Supported Version :"})," 2.0.0-beta3 and later"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"A beginner-friendly guide to writing your first yaci-store plugin"})}),"\n",(0,i.jsx)(s.p,{children:"This guide will walk you through creating simple plugins using MVEL and SpEL expression languages. By the end of this tutorial, you'll understand how to filter and process blockchain data using the yaci-store plugin system."}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Yaci-store docker distribution installed"}),"\n",(0,i.jsx)(s.li,{children:"Basic understanding of blockchain concepts (transactions, UTXOs, metadata)"}),"\n",(0,i.jsx)(s.li,{children:"Familiarity with simple programming concepts"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"setup",children:"Setup"}),"\n",(0,i.jsx)(s.h3,{id:"1-enable-plugin-support",children:"1. Enable Plugin Support"}),"\n",(0,i.jsx)(s.p,{children:"First, unzip your yaci-store docker distribution and navigate to the directory."}),"\n",(0,i.jsxs)(s.p,{children:["Edit the ",(0,i.jsx)(s.code,{children:"config/env"})," file to enable plugin support by uncommenting the following line:"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"JDK_JAVA_OPTIONS"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"${JDK_JAVA_OPTIONS} "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"-Dloader.path"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"=plugins,plugins/lib,plugins/ext-jars"})]})})}),"\n",(0,i.jsx)(s.h3,{id:"2-understanding-the-plugin-directory-structure",children:"2. Understanding the Plugin Directory Structure"}),"\n",(0,i.jsx)(s.p,{children:"The plugin system uses the following directory structure:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"plugins/"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"├── scripts/     # Your plugin script files go here"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"├── ext-jars/    # External JAR files (for advanced use cases)"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"└── lib/         # Additional libraries"})})]})}),"\n",(0,i.jsx)(s.h3,{id:"3-plugin-configuration",children:"3. Plugin Configuration"}),"\n",(0,i.jsxs)(s.p,{children:["Inside the ",(0,i.jsx)(s.code,{children:"config"})," folder, you'll find ",(0,i.jsx)(s.code,{children:"application-plugins.yml"}),". This file configures all your plugins."]}),"\n",(0,i.jsxs)(s.p,{children:["To enable plugin support, set ",(0,i.jsx)(s.code,{children:"store.plugins.enabled"})," to ",(0,i.jsx)(s.code,{children:"true"}),":"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]})]})}),"\n",(0,i.jsx)(s.h2,{id:"understanding-plugin-types",children:"Understanding Plugin Types"}),"\n",(0,i.jsx)(s.p,{children:"Yaci-store supports several types of plugins:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Filter Plugins"}),": Control what data gets stored in the database"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Pre-Action Plugins"}),": Modify data before it's saved"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Post-Action Plugins"}),": Perform actions after data is saved"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Event Handler Plugins"}),": React to blockchain events"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"plugin-languages",children:"Plugin Languages"}),"\n",(0,i.jsx)(s.p,{children:"For this guide, we'll focus on two simple expression languages:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"MVEL"}),": A powerful expression language with Java-like syntax"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"SpEL"}),": Spring Expression Language, great for simple filtering"]}),"\n"]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["The Yaci Store plugin system also supports writing plugins in ",(0,i.jsx)(s.strong,{children:"Python"})," and ",(0,i.jsx)(s.strong,{children:"JavaScript"}),".\nHowever, Python and JavaScript support is currently in ",(0,i.jsx)(s.strong,{children:"preview"}),".\nWe will cover them in a separate document later."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"your-first-plugin-filtering-nft-metadata",children:"Your First Plugin: Filtering NFT Metadata"}),"\n",(0,i.jsx)(s.p,{children:"Let's create a plugin that only stores NFT metadata (label 721) in the database."}),"\n",(0,i.jsx)(s.h3,{id:"method-1-using-expressions-simplest",children:"Method 1: Using Expressions (Simplest)"}),"\n",(0,i.jsx)(s.p,{children:"The easiest way to create a filter is using simple expressions:"}),"\n",(0,i.jsx)(s.h4,{id:"mvel-expression",children:"MVEL Expression"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"metadata.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"NFT Metadata Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'label == "721"'})]})]})}),"\n",(0,i.jsx)(s.h4,{id:"spel-expression",children:"SpEL Expression"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"metadata.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"NFT Metadata Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"spel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'label == "721"'})]})]})}),"\n",(0,i.jsx)(s.p,{children:'Both expressions do the same thing: they filter metadata to only include items with label "721" (NFT metadata standard).'}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Key Points:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"metadata.save"})," extension point is triggered when metadata is saved."]}),"\n",(0,i.jsx)(s.li,{children:"In an expression-based filter, direct access to the domain class's fields is available."}),"\n",(0,i.jsxs)(s.li,{children:["The expression should evaluate to ",(0,i.jsx)(s.code,{children:"true"})," for the item to be stored."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"method-2-using-inline-scripts",children:"Method 2: Using Inline Scripts"}),"\n",(0,i.jsx)(s.p,{children:"For more complex logic, you can write inline scripts:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"metadata.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Multiple Label Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"inline-script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            filteredItems = [];"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            for (item : items) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'                if (item.label == "721" || item.label == "1967") {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                    filteredItems.add(item);"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            return filteredItems;"})})]})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Key Points:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["In inline scripts, the input is always called ",(0,i.jsx)(s.code,{children:"items"})]}),"\n",(0,i.jsx)(s.li,{children:"You must return the filtered list"}),"\n",(0,i.jsx)(s.li,{children:"Don't include function signatures, just the body"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"method-3-using-external-script-files",children:"Method 3: Using External Script Files"}),"\n",(0,i.jsx)(s.p,{children:"For reusable or complex logic, create separate script files:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"plugins/scripts/nft-filter.mvel"}),":"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"def filterNFTMetadata(items) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    filteredItems = [];"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    for (item : items) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        if (item.label == "721") {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            filteredItems.add(item);"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    return filteredItems;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsx)(s.li,{children:"Reference it in your configuration:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"metadata.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"NFT Metadata Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"file"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"/app/plugins/scripts/nft-filter.mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"filterNFTMetadata"})]})]})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Note"}),": For Docker deployments, use ",(0,i.jsx)(s.code,{children:"/app/plugins/scripts/"})," as the path prefix."]}),"\n",(0,i.jsx)(s.h2,{id:"testing-your-plugin",children:"Testing Your Plugin"}),"\n",(0,i.jsx)(s.h3,{id:"quick-start-configuration",children:"Quick Start Configuration"}),"\n",(0,i.jsx)(s.p,{children:"To test quickly without syncing from genesis, you can start from a recent block:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"properties","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"properties","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Add to config/application.properties"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store.cardano.sync-start-slot="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"17558626"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store.cardano.sync-start-blockhash="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"3b907cde82b21fb0511845072139aade67222a47c3dcbf90d1e6931b1ad1e30e"})]})]})}),"\n",(0,i.jsx)(s.h3,{id:"start-yaci-store",children:"Start Yaci-Store"}),"\n",(0,i.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./yaci-store.sh"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"start"})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Verify the logs to ensure that ",(0,i.jsx)(s.code,{children:"yaci-store"})," is running correctly and that plugins are enabled:"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"tail"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"logs/yaci-store.log"})]})})}),"\n",(0,i.jsx)(s.p,{children:"or,"}),"\n",(0,i.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"text","data-theme":"default",children:(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"./yaci_store.sh logs"})})})}),"\n",(0,i.jsx)(s.h3,{id:"verify-results",children:"Verify Results"}),"\n",(0,i.jsx)(s.p,{children:"Connect to the database and check the results:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./psql.sh"})})})}),"\n",(0,i.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-- Set the schema"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SET"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" search_path "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TO"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" yaci_store;"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:" "}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-- Check that only NFT metadata (label 721) is stored"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_hash, label "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" transaction_metadata;"})]})]})}),"\n",(0,i.jsx)(s.p,{children:'You should see only metadata with label "721".'}),"\n",(0,i.jsx)(s.h2,{id:"example-2-filtering-high-value-utxos",children:"Example 2: Filtering High-Value UTXOs"}),"\n",(0,i.jsx)(s.p,{children:"Let's create a plugin that only stores UTXOs worth more than 1000 ADA:"}),"\n",(0,i.jsx)(s.h3,{id:"spel-expression-recommended-for-simple-filters",children:"SpEL Expression (Recommended for simple filters)"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"High Value UTXO Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"spel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"lovelaceAmount > 1000000000"})]})]})}),"\n",(0,i.jsx)(s.h3,{id:"mvel-expression-with-multiple-conditions",children:"MVEL Expression with Multiple Conditions"}),"\n",(0,i.jsx)(s.p,{children:"High value UTXOs without any native assets:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"High Value and Asset UTXO Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            lovelaceAmount > 1000000000 &&"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            (amounts != null && amounts.size() == 1)"})})]})}),"\n",(0,i.jsx)(s.h2,{id:"example-3-filtering-by-asset-policy",children:"Example 3: Filtering by Asset Policy"}),"\n",(0,i.jsx)(s.p,{children:"To filter UTXOs that contain specific native assets:"}),"\n",(0,i.jsx)(s.h3,{id:"spel-with-collection-filtering",children:"SpEL with Collection Filtering"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Specific Asset Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"spel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"amounts.?[policyId == 'your_policy_id_here'].size() > 0"})]})]})}),"\n",(0,i.jsx)(s.h3,{id:"mvel-with-custom-logic",children:"MVEL with Custom Logic"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Multiple Policy Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            if (amounts == null) return false;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            foreach (amount : amounts) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                if (amount.policyId == 'policy1' ||"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                    amount.policyId == 'policy2') {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                    return true;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            return false;"})})]})}),"\n",(0,i.jsx)(s.h2,{id:"pre-action-plugins-modifying-data",children:"Pre-Action Plugins: Modifying Data"}),"\n",(0,i.jsx)(s.p,{children:"Pre-action plugins run after filters but before data is saved. They can modify the data."}),"\n",(0,i.jsx)(s.h3,{id:"example-filter-utxos-with-specific-policyid-and-replace-it-with-a-custom-label",children:"Example: Filter utxos with Specific PolicyId and Replace it with a custom label"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"filters"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Specific Asset Filter"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"spel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"expression"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"amounts.?[policyId == 'bfc7197e735d2748024be222ed510a23d8682e9f912769e6d922a276'].size() > 0"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"pre-actions"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"utxo.unspent.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Replace PolicyId in UTXOs"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"inline-script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            modifiedUtxos = [];"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            for (utxo : items) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"              for (amt: utxo.amounts) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'                if (amt.getPolicyId() == "bfc7197e735d2748024be222ed510a23d8682e9f912769e6d922a276") {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'                    amt.setPolicyId("MyPolicyId"); // Update policyId'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                    modifiedUtxos.add(amt);"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"              }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            return modifiedUtxos;"})})]})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Key Points:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Pre-action plugins allow you to modify data before it is saved."}),"\n",(0,i.jsxs)(s.li,{children:["While most domain objects (items) are immutable, meaning you can update their fields, there are exceptions. For example,\n",(0,i.jsx)(s.a,{href:"./plugin_api-guide#txmetadatalabel",children:(0,i.jsx)(s.code,{children:"TxMetadataLabel"})})," cannot be modified as it does not have setter methods. In such cases, you may need to create a new\ninstance with updated values.\nTo check if an object is mutable or not with regard to the storage extension point, refer to the\n",(0,i.jsx)(s.a,{href:"./plugin_api-guide",children:"Plugin API Guide"}),"."]}),"\n",(0,i.jsx)(s.li,{children:"Similar to filter plugins, a pre-action plugin can be written in an external script file or as an inline script."}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"post-action-plugins-notifications",children:"Post-Action Plugins: Notifications"}),"\n",(0,i.jsx)(s.p,{children:"Post-action plugins run after data is successfully saved. Perfect for notifications."}),"\n",(0,i.jsx)(s.h3,{id:"example-log-high-fee-transactions",children:"Example: Log High-Fee Transactions"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"post-actions"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"transaction.save"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"High Fee Transaction Logger"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"inline-script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            highFeeTxCount = 0;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            totalOutput = 0;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            for (txn : items) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                if (txn.fee > 1000000) { // > 1 ADA"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                    highFeeTxCount++;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"                }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            if (highFeeTxCount > 0) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'                System.out.println("Found " + highFeeTxCount + " high-fee transactions");'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            }"})})]})}),"\n",(0,i.jsx)(s.h2,{id:"event-handler-plugins-reacting-to-events",children:"Event Handler Plugins: Reacting to Events"}),"\n",(0,i.jsx)(s.p,{children:"Event handlers listen to blockchain events and can perform custom actions."}),"\n",(0,i.jsx)(s.h3,{id:"example-block-processing-monitor",children:"Example: Block Processing Monitor"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"store"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"plugins"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"enabled"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"event-handlers"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"BlockEvent"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Block Monitor"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"lang"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"mvel"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"inline-script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"            block = event.block;"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'            System.out.println("Processing block " + block.header.headerBody.blockNumber +'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:'                             " with " + block.transactionBodies.size() + " transactions");'})})]})}),"\n",(0,i.jsx)(s.h2,{id:"common-extension-points",children:"Common Extension Points"}),"\n",(0,i.jsx)(s.p,{children:"Here are the most commonly used extension points:"}),"\n",(0,i.jsx)(s.h3,{id:"storage-extension-points",children:"Storage Extension Points"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metadata.save"})," - Transaction metadata"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"utxo.unspent.save"})," - New unspent UTXOs"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"transaction.save"})," - Transaction data"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"asset.mint.save"})," - Asset minting operations"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"event-types",children:"Event Types"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"BlockEvent"})," - New blocks"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"TransactionEvent"})," - Transaction processing"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"AddressUtxoEvent"})," - Address UTXO changes"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"MintBurnEvent"})," - Asset mint/burn operations"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"tips-for-success",children:"Tips for Success"}),"\n",(0,i.jsx)(s.h3,{id:"1-start-simple",children:"1. Start Simple"}),"\n",(0,i.jsx)(s.p,{children:"Begin with expression-based filters before moving to scripts."}),"\n",(0,i.jsx)(s.h3,{id:"2-test-incrementally",children:"2. Test Incrementally"}),"\n",(0,i.jsx)(s.p,{children:"Test each plugin individually before combining multiple plugins."}),"\n",(0,i.jsx)(s.h3,{id:"3-use-appropriate-field-names",children:"3. Use Appropriate Field Names"}),"\n",(0,i.jsx)(s.p,{children:"Make sure field names in your expressions match the Java model exactly:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"lovelaceAmount"})," (not ",(0,i.jsx)(s.code,{children:"lovelace_amount"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"policyId"})," (not ",(0,i.jsx)(s.code,{children:"policy_id"}),")"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"4-handle-null-values",children:"4. Handle Null Values"}),"\n",(0,i.jsx)(s.p,{children:"Always check for null values in your expressions:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Good"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"amounts != null && amounts.size() > 0"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Bad (can cause errors)"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"amounts.size() > 0"})})]})}),"\n",(0,i.jsx)(s.h3,{id:"5-multiple-filters--and-logic",children:"5. Multiple Filters = AND Logic"}),"\n",(0,i.jsx)(s.p,{children:"If you have multiple filters for the same extension point, they all must return true (AND logic)."}),"\n",(0,i.jsx)(s.h2,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Forgetting semicolons in MVEL"}),": Always end statements with ",(0,i.jsx)(s.code,{children:";"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Wrong field names"}),": Use exact Java field names"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Not handling null values"}),": Check for null before accessing properties"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Wrong file paths"}),": Use ",(0,i.jsx)(s.code,{children:"/app/plugins/scripts/"})," for Docker deployments"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"non-docker-distribution",children:"Non-Docker Distribution"}),"\n",(0,i.jsx)(s.p,{children:"If you're using a non-Docker distribution:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Uncomment this line in ",(0,i.jsx)(s.code,{children:"bin/start.sh"}),":"]}),"\n",(0,i.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"JAVA_OPTS"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"$JAVA_OPTS -Dloader.path=plugins,plugins/lib,plugins/ext-jars"'})]})})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Use relative paths in your configuration:"}),"\n",(0,i.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",children:(0,i.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"script"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"file"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"./plugins/scripts/your-script.mvel"})]})]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(s.h3,{id:"plugin-not-working",children:"Plugin Not Working?"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Check that ",(0,i.jsx)(s.code,{children:"store.plugins.enabled=true"})]}),"\n",(0,i.jsx)(s.li,{children:"Verify file paths are correct"}),"\n",(0,i.jsx)(s.li,{children:"Check logs for syntax errors"}),"\n",(0,i.jsx)(s.li,{children:"Ensure field names match Java models"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"syntax-errors",children:"Syntax Errors?"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Start with simple expressions"}),"\n",(0,i.jsx)(s.li,{children:"Check for missing semicolons"}),"\n",(0,i.jsx)(s.li,{children:"Verify parentheses matching"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"With these basics, you're ready to start building powerful blockchain data processing plugins!"}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(s.p,{children:"Once you're comfortable with basic plugins, explore:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"./context-variables",children:"Plugin Context Variables"})," - Context variables available in plugins"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"./plugin-configuration-reference",children:"Plugin Configuration Reference"})," - Complete configuration options"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"./plugin_api-guide",children:"Plugin API Guide"})," - Developer Reference for plugin APIs"]}),"\n"]})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.a)(),e.components);return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/plugins/plugin-getting-started.mdx",route:"/plugins/plugin-getting-started",timestamp:1755685845e3,pageMap:[{kind:"Meta",data:{index:"Overview","getting-started":{title:"Getting Started"},design:"Design",docker:"Docker",build_run:"Build & Run",usage:{title:"Usage"},stores:"Stores",plugins:{title:"Plugin Framework"},"other-configurations":"Other Configurations","ledger-state-mismatches":"Ledger State Mismatches",showcase:"Showcase"}},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{"getting-started-2.x.x":"Getting Started 2.0.0-beta4","getting-started-2.0.0-beta1":"Getting Started 2.0.0-beta1"}},{kind:"MdxPage",name:"getting-started-2.0.0-beta1",route:"/getting-started/getting-started-2.0.0-beta1",frontMatter:{navigation:!1}},{kind:"MdxPage",name:"getting-started-2.x.x",route:"/getting-started/getting-started-2.x.x"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"ledger-state-mismatches",route:"/ledger-state-mismatches",children:[{kind:"Folder",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1",children:[{kind:"MdxPage",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1/2-0-0-beta1"},{kind:"Meta",data:{"2-0-0-beta1":"Overview"}}]},{kind:"Folder",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3",children:[{kind:"MdxPage",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3/2-0-0-beta3"},{kind:"Meta",data:{"2-0-0-beta3":"Overview",mainnet:"Mainnet"}},{kind:"Folder",name:"mainnet",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet",children:[{kind:"Folder",name:"_hidden",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden",children:[{kind:"MdxPage",name:"drep-distribution-analysis",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-analysis"},{kind:"MdxPage",name:"drep-distribution-summary",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-summary"},{kind:"Meta",data:{"drep-distribution-analysis":"Drep Distribution Analysis","drep-distribution-summary":"Drep Distribution Summary"}}]},{kind:"MdxPage",name:"drep-active-until-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-active-until-detail"},{kind:"MdxPage",name:"drep-distribution-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-distribution-detail"},{kind:"Meta",data:{"drep-active-until-detail":"Drep Active until Detail","drep-distribution-detail":"Drep Distribution Detail"}}]}]},{kind:"Meta",data:{"2-0-0-beta1":"2.0.0-beta1","2-0-0-beta3":"2.0.0-beta3"}}]},{kind:"MdxPage",name:"ledger-state-mismatches",route:"/ledger-state-mismatches"},{kind:"MdxPage",name:"other-configurations",route:"/other-configurations"},{kind:"Folder",name:"plugins",route:"/plugins",children:[{kind:"Meta",data:{"plugin-getting-started":"Getting Started - Write your first plugin","plugin_api-guide":"Plugin API Guide","context-variables":"Context Variables Overview",variables:"Variable Reference Guides","plugin-configuration-reference":"Plugin Configuration"}},{kind:"MdxPage",name:"context-variables",route:"/plugins/context-variables"},{kind:"MdxPage",name:"plugin-configuration-reference",route:"/plugins/plugin-configuration-reference"},{kind:"MdxPage",name:"plugin-getting-started",route:"/plugins/plugin-getting-started"},{kind:"MdxPage",name:"plugin_api-guide",route:"/plugins/plugin_api-guide"}]},{kind:"MdxPage",name:"showcase",route:"/showcase"},{kind:"Folder",name:"stores",route:"/stores",children:[{kind:"Meta",data:{overview:"Overview",configuration:"Store Configuration"}},{kind:"MdxPage",name:"configuration",route:"/stores/configuration"},{kind:"MdxPage",name:"overview",route:"/stores/overview"}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{"getting-started-as-library":"As Library","getting-started-out-of-box":"Out of Box Indexers","aggregation-app-getting-started":"Aggregation App (Account Balance)"}},{kind:"MdxPage",name:"aggregation-app-getting-started",route:"/usage/aggregation-app-getting-started"},{kind:"MdxPage",name:"getting-started-as-library",route:"/usage/getting-started-as-library"},{kind:"MdxPage",name:"getting-started-out-of-box",route:"/usage/getting-started-out-of-box"}]}],flexsearch:{codeblocks:!0},title:"Plugin Getting Started Guide",headings:o},pageNextRoute:"/plugins/plugin-getting-started",nextraLayout:r.ZP,themeConfig:a.Z};s.default=(0,l.j)(d)},3209:function(e,s,n){"use strict";var i=n(5893);n(7294);let l={logo:(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:"Yaci Store"})}),project:{link:"https://github.com/bloxbean/yaci-store"},chat:{link:"https://discord.gg/JtQ54MSw6p"},docsRepositoryBase:"https://github.com/bloxbean/yaci-store/tree/main/docs",footer:{text:"\xa9 2024 BloxBean project"},useNextSeoProps:()=>({titleTemplate:"%s – Yaci Store"}),head:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{property:"description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,i.jsx)("meta",{property:"og:title",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,i.jsx)("meta",{property:"og:description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"})]})};s.Z=l},5789:function(){}},function(e){e.O(0,[359,888,774,179],function(){return e(e.s=9823)}),_N_E=e.O()}]);