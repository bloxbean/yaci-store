(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{3667:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/plugins/context-variables",function(){return n(583)}])},583:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return c}});var a=n(5893),i=n(2673),r=n(4294),t=n(3209);n(4759);var l=n(2643),o=n(208);let c=[{depth:2,value:"Overview",id:"overview"},{depth:2,value:"Built-in Variables",id:"built-in-variables"},{depth:3,value:"Core Variables",id:"core-variables"},{depth:4,value:"named_jdbc  (Recommended)",id:"named_jdbc--recommended"},{depth:4,value:"jdbc",id:"jdbc"},{depth:4,value:"http",id:"http"},{depth:4,value:"rest",id:"rest"},{depth:4,value:"env",id:"env"},{depth:4,value:"state",id:"state"},{depth:4,value:"global_state",id:"global_state"},{depth:4,value:"locker",id:"locker"},{depth:2,value:"Variable Providers",id:"variable-providers"},{depth:3,value:"What is a Variable Provider?",id:"what-is-a-variable-provider"},{depth:3,value:"How Variable Providers Work",id:"how-variable-providers-work"},{depth:3,value:"Benefits of Variable Providers",id:"benefits-of-variable-providers"},{depth:2,value:"Best Practices",id:"best-practices"},{depth:3,value:"For Variable Provider Developers",id:"for-variable-provider-developers"},{depth:2,value:"Configuration",id:"configuration"},{depth:2,value:"Troubleshooting",id:"troubleshooting"},{depth:3,value:"Use Cases and Ideas for Custom Variable Providers",id:"use-cases-and-ideas-for-custom-variable-providers"},{depth:4,value:"Communication Services",id:"communication-services"},{depth:4,value:"External Integrations",id:"external-integrations"},{depth:4,value:"Blockchain Integrations",id:"blockchain-integrations"},{depth:4,value:"Monitoring and Analytics",id:"monitoring-and-analytics"}];function d(e){let s=Object.assign({h1:"h1",p:"p",strong:"strong",h2:"h2",code:"code",h3:"h3",h4:"h4",pre:"pre",span:"span",ul:"ul",li:"li",ol:"ol",hr:"hr"},(0,l.a)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{children:"Plugin Context Variables"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Built-in Variables and Custom Variable Providers for Plugin Development"})}),"\n",(0,a.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(s.p,{children:"Context variables are pre-defined objects and utilities that are automatically available to all plugin scripts without any import or initialization. These variables provide access to essential functionality like database operations, HTTP requests, state management, and more."}),"\n",(0,a.jsx)(s.p,{children:"The plugin framework also supports custom Variable Providers, allowing developers to extend the available variables by implementing their own providers and bundling them as JAR files."}),"\n",(0,a.jsx)(s.h2,{id:"built-in-variables",children:"Built-in Variables"}),"\n",(0,a.jsxs)(s.p,{children:["Yaci-store provides several built-in variables through the ",(0,a.jsx)(s.code,{children:"DefaultVariableProvider"}),". These variables are automatically injected into the plugin execution context and can be used directly in your scripts."]}),"\n",(0,a.jsx)(s.h3,{id:"core-variables",children:"Core Variables"}),"\n",(0,a.jsxs)(s.h4,{id:"named_jdbc--recommended",children:[(0,a.jsx)(s.code,{children:"named_jdbc"}),"  (Recommended)"]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"NamedParameterJdbcTemplate"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Execute SQL queries with named parameters for better readability and safety."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Query with named parameters (much more readable)"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'params = ["address": utxo.ownerAddr, "minAmount": 1000000];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'result = named_jdbc.queryForMap("SELECT COUNT(*) as count FROM address_utxo WHERE owner_addr = :address AND lovelace_amount > :minAmount", params);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'count = result["count"];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Query for multiple records with named parameters"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'params = ["address": utxo.ownerAddr];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'rows = named_jdbc.queryForList("SELECT tx_hash, lovelace_amount FROM address_utxo WHERE owner_addr = :address", params);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"for (row: rows) {"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  tx_hash = row['tx_hash'];"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  amount = row['lovelace_amount'];"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Update with named parameters"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'updateParams = ["txHash": txHash, "newStatus": "confirmed", "timestamp": System.currentTimeMillis()];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'named_jdbc.update("UPDATE tx_status SET status = :newStatus, updated_at = :timestamp WHERE tx_hash = :txHash", updateParams);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Complex query with multiple parameters"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'queryParams = ["poolId": poolId, "fromEpoch": 350, "toEpoch": 360];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'delegations = named_jdbc.queryForObject("SELECT COUNT(*) FROM delegation WHERE pool_id = :poolId AND epoch >= :fromEpoch AND epoch <= :toEpoch", queryParams);'})})]})}),"\n",(0,a.jsx)(s.h4,{id:"jdbc",children:(0,a.jsx)(s.code,{children:"jdbc"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"JdbcTemplate"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Direct database access using JDBC for executing SQL queries and updates."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Query for a single value (count, sum, etc.)"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'result = jdbc.queryForMap("SELECT COUNT(*) as cnt FROM address_utxo WHERE owner_addr = ?", address);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"count = result['cnt'];"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Query for multiple records"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'rows = jdbc.queryForList("SELECT tx_hash, lovelace_amount FROM address_utxo WHERE owner_addr = ?", address);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"for (row: rows) {"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  tx_hash = row['tx_hash'];"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  amount = row['lovelace_amount'];"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Execute update/insert/delete"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'jdbc.update("UPDATE custom_table SET processed = true WHERE tx_hash = ?", txHash);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'jdbc.update("INSERT INTO tx_log (tx_hash, status) VALUES (?, ?)", txHash, "processed");'})})]})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"JavaScript Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"javascript","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"javascript","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Query for a single value (count, sum, etc.)"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"var"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" result "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"jdbc"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".queryForMap"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT COUNT(*) as cnt FROM address_utxo WHERE owner_addr = ?"'}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" address);"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"result"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".get"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"cnt"'}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"));"})]})]})}),"\n",(0,a.jsx)(s.h4,{id:"http",children:(0,a.jsx)(s.code,{children:"http"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"PluginHttpClient"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Simplified HTTP client specifically designed for plugin developers with common operations."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// GET request"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = http.get("https://jsonplaceholder.typicode.com/todos/1", ["header1": "value1", "header2": "value2"]);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"if (response.status == 200) {"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    System.out.println("Response: " + response.body);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"} else {"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    System.out.println("Failed to fetch data: " + response.status);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// POST JSON"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'jsonData = ["title": "foo", "body": "bar", "userId": 1];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = http.postJson("https://jsonplaceholder.typicode.com/posts", jsonData, ["Content-Type": "application/json"]);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// POST form data"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'formData = ["title": txHash, "status": "processed"];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = http.postForm("https://api.example.com/notify", formData, null);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// PUT JSON"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'updateData = ["status": "confirmed"];'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = http.putJson("https://api.example.com/tx/" + txHash, updateData, ["Authorization": "Bearer token"]);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// DELETE request"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = http.delete("https://api.example.com/resource/" + id, ["Authorization": "Bearer token"]);'})})]})}),"\n",(0,a.jsx)(s.h4,{id:"rest",children:(0,a.jsx)(s.code,{children:"rest"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"RestTemplate"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Make HTTP/REST API calls to external services."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// GET request"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = rest.getForObject("https://api.example.com/data", java.lang.String);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// POST request with JSON (simple approach)"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"jsonData = '{\"transaction\": \"' + txHash + '\", \"amount\": ' + amount + '}';"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'response = rest.postForObject("https://api.example.com/webhook", jsonData, java.lang.String);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Note: For more complex HTTP operations, consider using the 'http' variable instead"})})]})}),"\n",(0,a.jsx)(s.h4,{id:"env",children:(0,a.jsx)(s.code,{children:"env"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"Environment"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Access environment variables and application configuration properties."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Get configuration with default value"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'webhookUrl = env.getProperty("plugin.webhook.url", "http://localhost:8080/webhook");'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'dbTimeout = env.getProperty("plugin.db.timeout", "30");'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Check if property exists"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'if (env.containsProperty("plugin.feature.enabled")) {'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    enabled = env.getProperty("plugin.feature.enabled", Boolean.class);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,a.jsx)(s.h4,{id:"state",children:(0,a.jsx)(s.code,{children:"state"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"State"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Plugin-specific persistent state management that survives between executions."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Store and retrieve values"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'state.put("last_processed_slot", currentSlot);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'state.put("transaction_count", 1000);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Retrieve values"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'lastSlot = state.get("last_processed_slot");'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'count = state.get("transaction_count");'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Check if key exists"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'if (state.containsKey("last_processed_slot")) {'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    // Process based on stored state"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,a.jsx)(s.h4,{id:"global_state",children:(0,a.jsx)(s.code,{children:"global_state"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"State"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Global state shared across all plugins for cross-plugin communication and data sharing."]}),"\n",(0,a.jsx)(o.UW,{type:"warning",children:(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Note"}),": Due to a bug in version 2.0.0-beta3, global state must be accessed using ",(0,a.jsx)(s.code,{children:"global_state.global()"})," in plugins instead of directly using ",(0,a.jsx)(s.code,{children:"global_state"}),"."]})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"mvel","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Store global data (accessible by all plugins)"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'global_state.global().put("network_tip", currentSlot);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'global_state.global().put("epoch_info", epochData);'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"// Retrieve global data in any plugin"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'networkTip = global_state.global().get("network_tip");'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'epochInfo = global_state.global().get("epoch_info");'})})]})}),"\n",(0,a.jsx)(s.h4,{id:"locker",children:(0,a.jsx)(s.code,{children:"locker"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Type"}),": ",(0,a.jsx)(s.code,{children:"Locker"}),"\n",(0,a.jsx)(s.strong,{children:"Purpose"}),": Thread-safe locking mechanism for synchronizing access to shared resources."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"MVEL Example"}),":"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"mvel","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"mvel","data-theme":"default",children:(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"//TODO"})})})}),"\n",(0,a.jsx)(o.UW,{type:"info",children:(0,a.jsxs)(s.p,{children:["All built-in variables are directly accessible by name in your plugin scripts. For example, you can use ",(0,a.jsx)(s.code,{children:"jdbc.queryForObject(...)"})," directly without any initialization."]})}),"\n",(0,a.jsx)(s.h2,{id:"variable-providers",children:"Variable Providers"}),"\n",(0,a.jsx)(s.p,{children:"Variable Providers are a powerful extension mechanism that allows developers to add new variables to the plugin context without modifying the core yaci-store codebase."}),"\n",(0,a.jsx)(s.h3,{id:"what-is-a-variable-provider",children:"What is a Variable Provider?"}),"\n",(0,a.jsxs)(s.p,{children:["A Variable Provider is a Java class that implements the ",(0,a.jsx)(s.code,{children:"VariableProvider"})," interface. It defines:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"A map of variable names to their corresponding objects"}),"\n",(0,a.jsx)(s.li,{children:"The lifecycle and initialization of these variables"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"how-variable-providers-work",children:"How Variable Providers Work"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Implementation"}),": Create a Java class implementing the ",(0,a.jsx)(s.code,{children:"VariableProvider"})," interface"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Packaging"}),": Bundle the compiled class and its dependencies into a JAR file"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Deployment"}),": Copy the JAR to the ",(0,a.jsx)(s.code,{children:"plugins/ext-jars"})," folder"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Configuration"}),": Add variable provider class name to the ",(0,a.jsx)(s.code,{children:"application-plugins.yml"})," under ",(0,a.jsx)(s.code,{children:"variable-providers"})]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Auto-loading"}),": Yaci-store automatically discovers and loads all Variable Providers at startup"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Usage"}),": Variables become available to all plugin scripts immediately"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"benefits-of-variable-providers",children:"Benefits of Variable Providers"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"No Core Modifications"}),": Extend functionality without touching yaci-store source code"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Modular Design"}),": Each provider is independent and can be added/removed easily"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Reusability"}),": Share providers across different yaci-store instances"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Community Ecosystem"}),": Share and use community-developed providers"]}),"\n"]}),"\n",(0,a.jsx)(o.UW,{type:"warning",children:(0,a.jsx)(s.p,{children:"Variable Providers must be thread-safe as they may be accessed concurrently by multiple plugins executing in parallel."})}),"\n",(0,a.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(s.h3,{id:"for-variable-provider-developers",children:"For Variable Provider Developers"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Use descriptive variable names that don't conflict with built-ins"}),"\n",(0,a.jsx)(s.li,{children:"Implement proper error handling and logging"}),"\n",(0,a.jsx)(s.li,{children:"Document required configuration and dependencies"}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(s.p,{children:"Variable Providers may require configuration through:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Application properties (",(0,a.jsx)(s.code,{children:"application.yml"})," or ",(0,a.jsx)(s.code,{children:"application.properties"}),")"]}),"\n",(0,a.jsx)(s.li,{children:"Environment variables"}),"\n",(0,a.jsxs)(s.li,{children:["Configuration files in the ",(0,a.jsx)(s.code,{children:"config"})," directory"]}),"\n",(0,a.jsx)(s.li,{children:"Provider-specific configuration mechanisms"}),"\n"]}),"\n",(0,a.jsx)(o.UW,{type:"info",children:(0,a.jsx)(s.p,{children:"Some Variable Providers may require API keys, connection strings, or other configuration. Always check the provider's documentation for setup requirements."})}),"\n",(0,a.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(s.p,{children:"Common issues with context variables:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Variable not found"}),": Ensure the Variable Provider JAR is in ",(0,a.jsx)(s.code,{children:"plugins/ext-jars"})]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ClassNotFoundException"}),": Check that all dependencies are included in the JAR"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Configuration errors"}),": Verify required configuration properties are set"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"use-cases-and-ideas-for-custom-variable-providers",children:"Use Cases and Ideas for Custom Variable Providers"}),"\n",(0,a.jsx)(s.p,{children:"Custom Variable Providers enable powerful integrations and functionality extensions:"}),"\n",(0,a.jsx)(s.h4,{id:"communication-services",children:"Communication Services"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Telegram Bot Integration"}),": Expose a ",(0,a.jsx)(s.code,{children:"telegram"})," variable for sending notifications"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Slack Webhooks"}),": Provide ",(0,a.jsx)(s.code,{children:"slack"})," variable for team alerts"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Email Service"}),": Add ",(0,a.jsx)(s.code,{children:"email"})," variable for sending automated emails"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"SMS Gateway"}),": Include ",(0,a.jsx)(s.code,{children:"sms"})," variable for critical alerts"]}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"external-integrations",children:"External Integrations"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"IPFS Client"}),": Expose ",(0,a.jsx)(s.code,{children:"ipfs"})," variable for decentralized storage operations"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Redis Client"}),": Provide ",(0,a.jsx)(s.code,{children:"redis"})," variable for caching and pub/sub"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Elasticsearch"}),": Add ",(0,a.jsx)(s.code,{children:"elastic"})," variable for advanced search capabilities"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Message Queues"}),": Include ",(0,a.jsx)(s.code,{children:"rabbitmq"})," or ",(0,a.jsx)(s.code,{children:"kafka"})," variables for event streaming"]}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"blockchain-integrations",children:"Blockchain Integrations"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Blockfrost API"}),": Expose ",(0,a.jsx)(s.code,{children:"blockfrost"})," variable for additional blockchain queries"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Koios API"}),": Provide ",(0,a.jsx)(s.code,{children:"koios"})," variable as an alternative data source"]}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"monitoring-and-analytics",children:"Monitoring and Analytics"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Prometheus Metrics"}),": Expose ",(0,a.jsx)(s.code,{children:"metrics"})," variable for custom metric collection"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Custom Loggers"}),": Provide specialized logging capabilities"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Analytics Services"}),": Add variables for tracking and analytics platforms"]}),"\n"]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.p,{children:"The context variable system, combined with custom Variable Providers, makes yaci-store's plugin framework extremely flexible and extensible, allowing for sophisticated integrations without modifying the core system."})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,l.a)(),e.components);return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/plugins/context-variables.mdx",route:"/plugins/context-variables",timestamp:1752662799e3,pageMap:[{kind:"Meta",data:{index:"Overview","getting-started":{title:"Getting Started"},design:"Design",docker:"Docker",build_run:"Build & Run",usage:{title:"Usage"},stores:"Stores",plugins:{title:"Plugin Framework"},"other-configurations":"Other Configurations","ledger-state-mismatches":"Ledger State Mismatches",showcase:"Showcase"}},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{"getting-started-2.x.x":"Getting Started 2.0.0-beta3","getting-started-2.0.0-beta1":"Getting Started 2.0.0-beta1"}},{kind:"MdxPage",name:"getting-started-2.0.0-beta1",route:"/getting-started/getting-started-2.0.0-beta1",frontMatter:{navigation:!1}},{kind:"MdxPage",name:"getting-started-2.x.x",route:"/getting-started/getting-started-2.x.x"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"ledger-state-mismatches",route:"/ledger-state-mismatches",children:[{kind:"Folder",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1",children:[{kind:"MdxPage",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1/2-0-0-beta1"},{kind:"Meta",data:{"2-0-0-beta1":"Overview"}}]},{kind:"Folder",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3",children:[{kind:"MdxPage",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3/2-0-0-beta3"},{kind:"Meta",data:{"2-0-0-beta3":"Overview",mainnet:"Mainnet"}},{kind:"Folder",name:"mainnet",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet",children:[{kind:"Folder",name:"_hidden",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden",children:[{kind:"MdxPage",name:"drep-distribution-analysis",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-analysis"},{kind:"MdxPage",name:"drep-distribution-summary",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-summary"},{kind:"Meta",data:{"drep-distribution-analysis":"Drep Distribution Analysis","drep-distribution-summary":"Drep Distribution Summary"}}]},{kind:"MdxPage",name:"drep-active-until-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-active-until-detail"},{kind:"MdxPage",name:"drep-distribution-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-distribution-detail"},{kind:"Meta",data:{"drep-active-until-detail":"Drep Active until Detail","drep-distribution-detail":"Drep Distribution Detail"}}]}]},{kind:"Meta",data:{"2-0-0-beta1":"2.0.0-beta1","2-0-0-beta3":"2.0.0-beta3"}}]},{kind:"MdxPage",name:"ledger-state-mismatches",route:"/ledger-state-mismatches"},{kind:"MdxPage",name:"other-configurations",route:"/other-configurations"},{kind:"Folder",name:"plugins",route:"/plugins",children:[{kind:"Meta",data:{"plugin-getting-started":"Getting Started - Write your first plugin","plugin_api-guide":"Plugin API Guide","context-variables":"Context Variables","plugin-configuration-reference":"Plugin Configuration"}},{kind:"MdxPage",name:"context-variables",route:"/plugins/context-variables"},{kind:"MdxPage",name:"plugin-configuration-reference",route:"/plugins/plugin-configuration-reference"},{kind:"MdxPage",name:"plugin-getting-started",route:"/plugins/plugin-getting-started"},{kind:"MdxPage",name:"plugin_api-guide",route:"/plugins/plugin_api-guide"}]},{kind:"MdxPage",name:"showcase",route:"/showcase"},{kind:"Folder",name:"stores",route:"/stores",children:[{kind:"Meta",data:{overview:"Overview",configuration:"Store Configuration"}},{kind:"MdxPage",name:"configuration",route:"/stores/configuration"},{kind:"MdxPage",name:"overview",route:"/stores/overview"}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{"getting-started-as-library":"As Library","getting-started-out-of-box":"Out of Box Indexers","aggregation-app-getting-started":"Aggregation App (Account Balance)"}},{kind:"MdxPage",name:"aggregation-app-getting-started",route:"/usage/aggregation-app-getting-started"},{kind:"MdxPage",name:"getting-started-as-library",route:"/usage/getting-started-as-library"},{kind:"MdxPage",name:"getting-started-out-of-box",route:"/usage/getting-started-out-of-box"}]}],flexsearch:{codeblocks:!0},title:"Plugin Context Variables",headings:c},pageNextRoute:"/plugins/context-variables",nextraLayout:r.ZP,themeConfig:t.Z};s.default=(0,i.j)(h)},3209:function(e,s,n){"use strict";var a=n(5893);n(7294);let i={logo:(0,a.jsx)("span",{children:(0,a.jsx)("b",{children:"Yaci Store"})}),project:{link:"https://github.com/bloxbean/yaci-store"},chat:{link:"https://discord.gg/JtQ54MSw6p"},docsRepositoryBase:"https://github.com/bloxbean/yaci-store/tree/main/docs",footer:{text:"\xa9 2024 BloxBean project"},useNextSeoProps:()=>({titleTemplate:"%s – Yaci Store"}),head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{property:"description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,a.jsx)("meta",{property:"og:title",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,a.jsx)("meta",{property:"og:description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"})]})};s.Z=i},5789:function(){}},function(e){e.O(0,[359,888,774,179],function(){return e(e.s=3667)}),_N_E=e.O()}]);