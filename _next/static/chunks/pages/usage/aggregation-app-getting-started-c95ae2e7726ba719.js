(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{185:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usage/aggregation-app-getting-started",function(){return t(144)}])},144:function(e,a,t){"use strict";t.r(a),t.d(a,{__toc:function(){return l}});var n=t(5893),r=t(2673),i=t(4294),o=t(3209);t(4759);var s=t(2643);let l=[{depth:2,value:"Aggregation App Getting Started",id:"aggregation-app-getting-started"},{depth:2,value:"Mode 1 - Companion Mode",id:"mode-1---companion-mode"},{depth:2,value:"Mode 2 - Standalone Mode",id:"mode-2---standalone-mode"},{depth:2,value:"Mode 3 - Standalone Mode with RocksDB Utxo Storage (Experimental)",id:"mode-3---standalone-mode-with-rocksdb-utxo-storage-experimental"}];function d(e){let a=Object.assign({h2:"h2",p:"p",strong:"strong",code:"code",a:"a",ol:"ol",li:"li",pre:"pre",span:"span"},(0,s.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h2,{id:"aggregation-app-getting-started",children:"Aggregation App Getting Started"}),"\n",(0,n.jsxs)(a.p,{children:["Using ",(0,n.jsx)(a.strong,{children:"yaci-store-aggregation-app"}),", you can track account balance related data. As account balance calculation is a resource intensive task,\nyou need to run this application as a separate application."]}),"\n",(0,n.jsxs)(a.p,{children:["Similar to main application, place  ",(0,n.jsx)(a.code,{children:"application.properties"}),' in a folder named "config"\nin the same directory as the jar file. The application will automatically pick up the configuration file.']}),"\n",(0,n.jsxs)(a.p,{children:["Swagger UI is available at ",(0,n.jsx)(a.a,{href:"http://localhost:8081/swagger-ui.html",children:"http://localhost:8081/swagger-ui.html"})]}),"\n",(0,n.jsx)(a.p,{children:"This application can be run in three modes."}),"\n",(0,n.jsx)(a.h2,{id:"mode-1---companion-mode",children:"Mode 1 - Companion Mode"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"Read UTxOs from the main database and write account balance to same database."})}),"\n",(0,n.jsxs)(a.p,{children:["In this mode, the aggregation app will start sync from the genesis block, but it doesn't write any UTxO data to the database.\nIt will only write account balance related data to the database. But it will read UTxOs from the database to calculate account balance.\nSo, you need to run this application along with ",(0,n.jsx)(a.strong,{children:"yaci-store-all"})," or ",(0,n.jsx)(a.strong,{children:"yaci-store-utxo-indexer"})," application."]}),"\n",(0,n.jsxs)(a.p,{children:[(0,n.jsx)(a.strong,{children:"Note:"})," Since this application depends on the main database, it needs to be run after the main application has been started for some time."]}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Run aggregation application."}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -jar yaci-store-aggregation-app-<version>.jar"})})})}),"\n",(0,n.jsxs)(a.ol,{start:"3",children:["\n",(0,n.jsx)(a.li,{children:"To clean account balance records from the database and start from the genesis block, use the following property."}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -Dstore.aggr.clean-db-before-start=true -jar yaci-store-aggregation-app-<version>.jar"})})})}),"\n",(0,n.jsx)(a.h2,{id:"mode-2---standalone-mode",children:"Mode 2 - Standalone Mode"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"Write UTxOs and account balance related data to a separate database."})}),"\n",(0,n.jsxs)(a.p,{children:["In this mode, the aggregation app will start sync from the genesis block and write UTxOs and account balance related data\nto a separate database instead of the main database. So, you don't need to run this application along with ",(0,n.jsx)(a.strong,{children:"yaci-store-all"})," or ",(0,n.jsx)(a.strong,{children:"yaci-store-utxo-indexer"})," application."]}),"\n",(0,n.jsxs)(a.p,{children:["This mode needs an additional configuration file named ",(0,n.jsx)(a.code,{children:"application-aggr.properties"}),". You can download this\nfile from download section."]}),"\n",(0,n.jsxs)(a.p,{children:["Similar to main application, place both  ",(0,n.jsx)(a.code,{children:"application.properties"})," and ",(0,n.jsx)(a.code,{children:"application-aggr.properties"}),' in a folder named "config"\nin the same directory as the jar file. The application will automatically pick up the configuration file.']}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Edit datasource properties in application.properties file to point to a separate database."}),"\n",(0,n.jsxs)(a.li,{children:["Edit ",(0,n.jsx)(a.code,{children:"application-aggr.properties"})," file to enable flyway migration for the new database."]}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["Make sure the ",(0,n.jsx)(a.strong,{children:"only"})," following properties are uncommented in ",(0,n.jsx)(a.code,{children:"application-aggr.properties"})," file."]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsxs)(a.code,{"data-language":"text","data-theme":"default",children:[(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.account.enabled=true"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.extensions.utxo-storage-type=default"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"spring.flyway.locations=classpath:db/store/{vendor}"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"spring.flyway.out-of-order=true"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"logging.file.name=./logs/yaci-store-aggr.log"})})]})}),"\n",(0,n.jsxs)(a.ol,{start:"3",children:["\n",(0,n.jsxs)(a.li,{children:["Run aggregation application with ",(0,n.jsx)(a.code,{children:"aggr"})," profile."]}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -Dspring.profiles.active=aggr -jar yaci-store-aggregation-app-<version>.jar"})})})}),"\n",(0,n.jsxs)(a.ol,{start:"4",children:["\n",(0,n.jsx)(a.li,{children:"To clean account balance records from the database and start from the genesis block, use the following property."}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -Dstore.aggr.clean-db-before-start=true -Dspring.profiles.active=aggr -jar yaci-store-aggregation-app-<version>.jar"})})})}),"\n",(0,n.jsx)(a.h2,{id:"mode-3---standalone-mode-with-rocksdb-utxo-storage-experimental",children:"Mode 3 - Standalone Mode with RocksDB Utxo Storage (Experimental)"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"Write UTxOs to embedded RocksDB storage and account balance related data to a separate database."})}),"\n",(0,n.jsxs)(a.p,{children:["In this mode, the aggregation app will start sync from the genesis block and write UTxOs to an embedded RocksDB storage\nand account balance related data to a separate database instead of the main database. So, you don't need to run this application along with ",(0,n.jsx)(a.strong,{children:"yaci-store-all"})," or ",(0,n.jsx)(a.strong,{children:"yaci-store-utxo-indexer"})," application."]}),"\n",(0,n.jsxs)(a.p,{children:["This mode needs an additional configuration file named ",(0,n.jsx)(a.code,{children:"application-aggr.properties"}),". You can download this\nfile from download section."]}),"\n",(0,n.jsxs)(a.p,{children:["Similar to main application, place both  ",(0,n.jsx)(a.code,{children:"application.properties"})," and ",(0,n.jsx)(a.code,{children:"application-aggr.properties"}),' in a folder named "config"']}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Edit datasource properties in application.properties file to point to a separate database."}),"\n",(0,n.jsxs)(a.li,{children:["Edit ",(0,n.jsx)(a.code,{children:"application-aggr.properties"})," file to enable flyway migration for the new database."]}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["Make sure the only following properties are uncommented in ",(0,n.jsx)(a.code,{children:"application-aggr.properties"})," file."]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsxs)(a.code,{"data-language":"text","data-theme":"default",children:[(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.account.enabled=true"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"spring.flyway.locations=classpath:db/store/{vendor}"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"spring.flyway.out-of-order=true"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"logging.file.name=./logs/yaci-store-aggr.log"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.rocksdb.base-dir=./rocksdb"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.extensions.utxo-storage-type=rocksdb"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.extensions.rocksdb-utxo-storage.write-batch-size=3000"})}),"\n",(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"store.extensions.rocksdb-utxo-storage.parallel-write=true"})})]})}),"\n",(0,n.jsxs)(a.ol,{start:"3",children:["\n",(0,n.jsxs)(a.li,{children:["Run aggregation application with ",(0,n.jsx)(a.code,{children:"aggr"})," profile."]}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -Dspring.profiles.active=aggr -jar yaci-store-aggregation-app-<version>.jar"})})})}),"\n",(0,n.jsxs)(a.ol,{start:"4",children:["\n",(0,n.jsx)(a.li,{children:"To clean account balance records from the database and start from the genesis block, use the following property."}),"\n"]}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"java -Dstore.aggr.clean-db-before-start=true -Dspring.profiles.active=aggr -jar yaci-store-aggregation-app-<version>.jar"})})})})]})}let c={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}=Object.assign({},(0,s.a)(),e.components);return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/usage/aggregation-app-getting-started.md",route:"/usage/aggregation-app-getting-started",timestamp:1745859636e3,pageMap:[{kind:"Meta",data:{index:"Overview","getting-started-2.x.x":"Getting Started 2.x.x",design:"Design",docker:"Docker",build_run:"Build & Run",usage:{title:"Usage"},stores:"Stores",about:{title:"About",type:"page"},"other-configurations":"Other Configurations","ledger-state-mismatches":"Ledger State Mismatches"}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"getting-started-2.x.x",route:"/getting-started-2.x.x"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"ledger-state-mismatches",route:"/ledger-state-mismatches"},{kind:"MdxPage",name:"other-configurations",route:"/other-configurations"},{kind:"Folder",name:"stores",route:"/stores",children:[{kind:"MdxPage",name:"overview",route:"/stores/overview"},{kind:"Meta",data:{overview:"Overview"}}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{"getting-started-as-library":"As Library","getting-started-out-of-box":"Out of Box Indexers","aggregation-app-getting-started":"Aggregation App (Account Balance)"}},{kind:"MdxPage",name:"aggregation-app-getting-started",route:"/usage/aggregation-app-getting-started"},{kind:"MdxPage",name:"getting-started-as-library",route:"/usage/getting-started-as-library"},{kind:"MdxPage",name:"getting-started-out-of-box",route:"/usage/getting-started-out-of-box"}]}],flexsearch:{codeblocks:!0},title:"Aggregation App Getting Started",headings:l},pageNextRoute:"/usage/aggregation-app-getting-started",nextraLayout:i.ZP,themeConfig:o.Z};a.default=(0,r.j)(c)},3209:function(e,a,t){"use strict";var n=t(5893);t(7294);let r={logo:(0,n.jsx)("span",{children:(0,n.jsx)("b",{children:"Yaci Store"})}),project:{link:"https://github.com/bloxbean/yaci-store"},chat:{link:"https://discord.gg/JtQ54MSw6p"},docsRepositoryBase:"https://github.com/bloxbean/yaci-store/tree/main/docs",footer:{text:"\xa9 2024 BloxBean project"},useNextSeoProps:()=>({titleTemplate:"%s â€“ Yaci Store"}),head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,n.jsx)("meta",{property:"og:title",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,n.jsx)("meta",{property:"og:description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"})]})};a.Z=r},5789:function(){}},function(e){e.O(0,[359,888,774,179],function(){return e(e.s=185)}),_N_E=e.O()}]);