(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{4102:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docker",function(){return n(7916)}])},7916:function(e,t,n){"use strict";n.r(t),n.d(t,{__toc:function(){return d}});var i=n(5893),a=n(2673),s=n(4294),r=n(3209);n(4759);var o=n(2643),l=n(208);let d=[{depth:2,value:"Pre-requisites",id:"pre-requisites"},{depth:2,value:"Environment Files",id:"environment-files"},{depth:2,value:"Docker Compose Files",id:"docker-compose-files"},{depth:2,value:"DB Indexes (After Initial Sync)",id:"db-indexes-after-initial-sync"},{depth:2,value:"Run Yaci Store ALL application",id:"run-yaci-store-all-application"},{depth:2,value:"Run Utxo Indexer application",id:"run-utxo-indexer-application"},{depth:2,value:"Run Aggregation App to calculate account balances",id:"run-aggregation-app-to-calculate-account-balances"},{depth:2,value:"Enable Submit Endpoint",id:"enable-submit-endpoint"}];function c(e){let t=Object.assign({h1:"h1",p:"p",ol:"ol",li:"li",strong:"strong",a:"a",ul:"ul",h2:"h2",code:"code",pre:"pre",span:"span"},(0,o.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{children:"Run with Docker Compose"}),"\n",(0,i.jsx)(t.p,{children:"There are three out-of-the-box applications available in the Yaci Store repository:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Yaci Store Utxo Indexer :"})," Includes Utxo Store, Epoch Store, and Submit component"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Yaci Store All :"})," Includes all stores"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Yaci Store Aggregation :"})," Aggregates account balances"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["You can run out-of-the-box applications with Docker Compose. The Docker Compose YAML files for the applications are inside\nthe ",(0,i.jsx)(t.a,{href:"https://github.com/bloxbean/yaci-store/tree/main/docker",children:(0,i.jsx)(t.strong,{children:"docker"})})," folder in GitHub repository."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Please ",(0,i.jsx)(t.strong,{children:"clone"})," the ",(0,i.jsx)(t.a,{href:"https://github.com/bloxbean/yaci-store",children:"repository"})," to access the Docker Compose files."]}),"\n",(0,i.jsx)(t.li,{children:"Verify compose yaml file are pointing to the correct application image version."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Docker"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"environment-files",children:"Environment Files"}),"\n",(0,i.jsx)(t.p,{children:"There are three configuration files available in docker folder:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"env"})," - Environment variables like JAVA_OPTS"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"application.properties"})," - Contains application specific properties. (e.g; Cardano node host, port, database info, store configuration etc.)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"application-aggr.properties"})," - Contains Aggregation application specific properties."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Please configure Cardano ",(0,i.jsx)(t.strong,{children:"Host"}),", ",(0,i.jsx)(t.strong,{children:"Port"}),", and ",(0,i.jsx)(t.strong,{children:"Protocol magic"})," in the ",(0,i.jsx)(t.code,{children:"application.properties"})," file."]}),"\n",(0,i.jsx)(t.h2,{id:"docker-compose-files",children:"Docker Compose Files"}),"\n",(0,i.jsxs)(t.p,{children:["In the following sections, we will use ",(0,i.jsx)(t.code,{children:"*-monolith.yml"})," files. These files help to run both Postgres and the application\nthrough a single Docker Compose file. If you want to run the application with an external database, you can use application-specific\nDocker Compose files, such as ",(0,i.jsx)(t.code,{children:"yaci-store-all.yml"}),", ",(0,i.jsx)(t.code,{children:"yaci-store-utxo-indexer.yml"}),", or ",(0,i.jsx)(t.code,{children:"yaci-store-aggregation.yml"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"db-indexes-after-initial-sync",children:"DB Indexes (After Initial Sync)"}),"\n",(0,i.jsxs)(t.p,{children:["During the initial sync with the ",(0,i.jsx)(t.strong,{children:"yaci-store-all"})," or ",(0,i.jsx)(t.strong,{children:"yaci-store-utxo-indexer"})," apps, the app automatically removes all optional DB indexes\nto speed up the sync process. Once the sync is completed, you need to manually re-apply those missing indexes for faster queries."]}),"\n",(0,i.jsx)(t.p,{children:"The SQL file of indexes that need to be re-applied can be found in the GitHub repository:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Yaci Store All App :"})," ",(0,i.jsx)(t.a,{href:"https://github.com/bloxbean/yaci-store/blob/main/applications/all/src/main/resources/sql/create-index.sql",children:"create-index.sql"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Utxo Indexer App :"})," ",(0,i.jsx)(t.a,{href:"https://github.com/bloxbean/yaci-store/blob/main/applications/utxo-indexer/src/main/resources/sql/create-index.sql",children:"create-index.sql"})]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"run-yaci-store-all-application",children:"Run Yaci Store ALL application"}),"\n",(0,i.jsxs)(t.p,{children:["This application includes ",(0,i.jsx)(t.strong,{children:"all"})," stores."]}),"\n",(0,i.jsxs)(t.p,{children:["By ",(0,i.jsx)(t.strong,{children:"default"}),", the ",(0,i.jsx)(t.strong,{children:"submit"})," endpoint is disabled. You can refer to the ",(0,i.jsx)(t.a,{href:"#enable-submit-endpoint",children:"Enable Submit Endpoint"})," section for instructions on how to enable it."]}),"\n",(0,i.jsx)(t.p,{children:"One of the advantages of Yaci Store is that you can decide what data to store. If you want to disable any specific store\nor its API endpoints, you have that flexibility."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["To disable a specific store, you can set the ",(0,i.jsx)(t.code,{children:"store.<store_name>.enabled"})," property to ",(0,i.jsx)(t.code,{children:"false"})," in ",(0,i.jsx)(t.code,{children:"application.properties"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["To disable a specific store's API endpoints, you can set the ",(0,i.jsx)(t.code,{children:"store.<store_name>.api-enabled"})," environment variable to ",(0,i.jsx)(t.code,{children:"false"})," in ",(0,i.jsx)(t.code,{children:"application.properties"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{"data-language":"shell","data-theme":"default",children:(0,i.jsx)(t.code,{"data-language":"shell","data-theme":"default",children:(0,i.jsxs)(t.span,{className:"line",children:[(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-all-monolith.yml"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,i.jsxs)(t.p,{children:["You can access swagger-ui at ",(0,i.jsx)(t.a,{href:"http://localhost:8080/swagger-ui/index.html",children:"http://localhost:8080/swagger-ui/index.html"})]}),"\n",(0,i.jsx)(l.UW,{type:"info",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note:"}),"\nWhen a store is disabled, the store specific data will not be processed and stored in the database. However, the store specific tables will be created in the database.\nThis will be fixed in the future release."]})}),"\n",(0,i.jsx)(l.UW,{type:"info",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Account Aggregation"})," :\nIt also includes the ",(0,i.jsx)(t.strong,{children:"account"})," aggregation module, but it is disabled by default. Instead of enabling this module,\nit's recommended to run the ",(0,i.jsx)(t.strong,{children:"aggregation-app"})," separately for calculating account balances."]})}),"\n",(0,i.jsx)(t.h2,{id:"run-utxo-indexer-application",children:"Run Utxo Indexer application"}),"\n",(0,i.jsxs)(t.p,{children:["The Utxo Indexer application consists of the ",(0,i.jsx)(t.strong,{children:"utxo store"}),", ",(0,i.jsx)(t.strong,{children:"epoch store"}),", and ",(0,i.jsx)(t.strong,{children:"submit"})," component."]}),"\n",(0,i.jsxs)(t.p,{children:["By ",(0,i.jsx)(t.strong,{children:"default"}),", the ",(0,i.jsx)(t.strong,{children:"submit"})," endpoint is disabled. You can refer to the ",(0,i.jsx)(t.a,{href:"#enable-submit-endpoint",children:"Enable Submit Endpoint"}),"  section for instructions on how to enable it."]}),"\n",(0,i.jsx)(t.pre,{"data-language":"shell","data-theme":"default",children:(0,i.jsx)(t.code,{"data-language":"shell","data-theme":"default",children:(0,i.jsxs)(t.span,{className:"line",children:[(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-utxo-indexer-monolith.yml"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,i.jsx)(t.h2,{id:"run-aggregation-app-to-calculate-account-balances",children:"Run Aggregation App to calculate account balances"}),"\n",(0,i.jsx)(t.p,{children:"Aggregation App is a separate application that calculates account balances by aggregating the UTXO store data."}),"\n",(0,i.jsx)(t.pre,{"data-language":"shell","data-theme":"default",children:(0,i.jsx)(t.code,{"data-language":"shell","data-theme":"default",children:(0,i.jsxs)(t.span,{className:"line",children:[(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-aggregation-monolith.yml"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(t.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,i.jsx)(t.h2,{id:"enable-submit-endpoint",children:"Enable Submit Endpoint"}),"\n",(0,i.jsxs)(t.p,{children:["Both the ",(0,i.jsx)(t.strong,{children:"yaci-store-all"})," and ",(0,i.jsx)(t.strong,{children:"yaci-store-utxo-indexer"})," applications provide ",(0,i.jsx)(t.strong,{children:"submit"})," and ",(0,i.jsx)(t.strong,{children:"script cost evaluation"})," endpoints.\nHowever, these endpoints are disabled by default."]}),"\n",(0,i.jsxs)(t.p,{children:["In ",(0,i.jsx)(t.code,{children:"application.properties"})," file :"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["To enable the ",(0,i.jsx)(t.strong,{children:"submit"})," endpoint, you need to configure the ",(0,i.jsx)(t.code,{children:"store.cardano.submit-api-url"})," endpoint."]}),"\n",(0,i.jsxs)(t.li,{children:["To enable both the ",(0,i.jsx)(t.strong,{children:"submit"})," and ",(0,i.jsx)(t.strong,{children:"script cost evaluation"})," endpoints, you need to set the ",(0,i.jsx)(t.code,{children:"store.cardano.ogmios-url"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"If both submit api url and ogmios url are configured, submit api url will be used for tx submission and ogmios url will be used for script cost evaluation."}),"\n"]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/docker.mdx",route:"/docker",timestamp:175568608e4,pageMap:[{kind:"Meta",data:{index:"Overview","getting-started":{title:"Getting Started"},design:"Design",docker:"Docker",build_run:"Build & Run",usage:{title:"Usage"},stores:"Stores",plugins:{title:"Plugin Framework"},"other-configurations":"Other Configurations","ledger-state-mismatches":"Ledger State Mismatches",showcase:"Showcase"}},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{"getting-started-2.x.x":"Getting Started 2.0.0-beta4","getting-started-2.0.0-beta1":"Getting Started 2.0.0-beta1"}},{kind:"MdxPage",name:"getting-started-2.0.0-beta1",route:"/getting-started/getting-started-2.0.0-beta1",frontMatter:{navigation:!1}},{kind:"MdxPage",name:"getting-started-2.x.x",route:"/getting-started/getting-started-2.x.x"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"ledger-state-mismatches",route:"/ledger-state-mismatches",children:[{kind:"Folder",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1",children:[{kind:"MdxPage",name:"2-0-0-beta1",route:"/ledger-state-mismatches/2-0-0-beta1/2-0-0-beta1"},{kind:"Meta",data:{"2-0-0-beta1":"Overview"}}]},{kind:"Folder",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3",children:[{kind:"MdxPage",name:"2-0-0-beta3",route:"/ledger-state-mismatches/2-0-0-beta3/2-0-0-beta3"},{kind:"Meta",data:{"2-0-0-beta3":"Overview",mainnet:"Mainnet"}},{kind:"Folder",name:"mainnet",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet",children:[{kind:"Folder",name:"_hidden",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden",children:[{kind:"MdxPage",name:"drep-distribution-analysis",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-analysis"},{kind:"MdxPage",name:"drep-distribution-summary",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/_hidden/drep-distribution-summary"},{kind:"Meta",data:{"drep-distribution-analysis":"Drep Distribution Analysis","drep-distribution-summary":"Drep Distribution Summary"}}]},{kind:"MdxPage",name:"drep-active-until-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-active-until-detail"},{kind:"MdxPage",name:"drep-distribution-detail",route:"/ledger-state-mismatches/2-0-0-beta3/mainnet/drep-distribution-detail"},{kind:"Meta",data:{"drep-active-until-detail":"Drep Active until Detail","drep-distribution-detail":"Drep Distribution Detail"}}]}]},{kind:"Meta",data:{"2-0-0-beta1":"2.0.0-beta1","2-0-0-beta3":"2.0.0-beta3"}}]},{kind:"MdxPage",name:"ledger-state-mismatches",route:"/ledger-state-mismatches"},{kind:"MdxPage",name:"other-configurations",route:"/other-configurations"},{kind:"Folder",name:"plugins",route:"/plugins",children:[{kind:"Meta",data:{"plugin-getting-started":"Getting Started - Write your first plugin","plugin_api-guide":"Plugin API Guide","context-variables":"Context Variables Overview",variables:"Variable Reference Guides","plugin-configuration-reference":"Plugin Configuration"}},{kind:"MdxPage",name:"context-variables",route:"/plugins/context-variables"},{kind:"MdxPage",name:"plugin-configuration-reference",route:"/plugins/plugin-configuration-reference"},{kind:"MdxPage",name:"plugin-getting-started",route:"/plugins/plugin-getting-started"},{kind:"MdxPage",name:"plugin_api-guide",route:"/plugins/plugin_api-guide"},{kind:"Folder",name:"variables",route:"/plugins/variables",children:[{kind:"Meta",data:{"quick-reference":"Quick Reference","database-access":"Database Access (jdbc, named_jdbc)","http-client":"HTTP Client (http)","file-operations":"File Operations (files)","state-management":"State Management (state, global_state)",configuration:"Configuration Access (env)"}},{kind:"MdxPage",name:"configuration",route:"/plugins/variables/configuration"},{kind:"MdxPage",name:"database-access",route:"/plugins/variables/database-access"},{kind:"MdxPage",name:"file-operations",route:"/plugins/variables/file-operations"},{kind:"MdxPage",name:"http-client",route:"/plugins/variables/http-client"},{kind:"MdxPage",name:"quick-reference",route:"/plugins/variables/quick-reference"},{kind:"MdxPage",name:"state-management",route:"/plugins/variables/state-management"}]}]},{kind:"MdxPage",name:"showcase",route:"/showcase"},{kind:"Folder",name:"stores",route:"/stores",children:[{kind:"Meta",data:{overview:"Overview",configuration:"Store Configuration"}},{kind:"MdxPage",name:"configuration",route:"/stores/configuration"},{kind:"MdxPage",name:"overview",route:"/stores/overview"}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{"getting-started-as-library":"As Library","getting-started-out-of-box":"Out of Box Indexers","aggregation-app-getting-started":"Aggregation App (Account Balance)"}},{kind:"MdxPage",name:"aggregation-app-getting-started",route:"/usage/aggregation-app-getting-started"},{kind:"MdxPage",name:"getting-started-as-library",route:"/usage/getting-started-as-library"},{kind:"MdxPage",name:"getting-started-out-of-box",route:"/usage/getting-started-out-of-box"}]}],flexsearch:{codeblocks:!0},title:"Run with Docker Compose",headings:d},pageNextRoute:"/docker",nextraLayout:s.ZP,themeConfig:r.Z};t.default=(0,a.j)(h)},3209:function(e,t,n){"use strict";var i=n(5893);n(7294);let a={logo:(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:"Yaci Store"})}),project:{link:"https://github.com/bloxbean/yaci-store"},chat:{link:"https://discord.gg/JtQ54MSw6p"},docsRepositoryBase:"https://github.com/bloxbean/yaci-store/tree/main/docs",footer:{text:"\xa9 2024 BloxBean project"},useNextSeoProps:()=>({titleTemplate:"%s – Yaci Store"}),head:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{property:"description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,i.jsx)("meta",{property:"og:title",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,i.jsx)("meta",{property:"og:description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"})]})};t.Z=a},5789:function(){}},function(e){e.O(0,[359,888,774,179],function(){return e(e.s=4102)}),_N_E=e.O()}]);