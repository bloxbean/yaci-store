(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{4102:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docker",function(){return i(4982)}])},4982:function(e,n,i){"use strict";i.r(n),i.d(n,{__toc:function(){return l}});var t=i(5893),o=i(2673),s=i(6231),r=i(2069);i(9488);var a=i(2643);let l=[{depth:2,value:"Pre-requisites",id:"pre-requisites"},{depth:2,value:"Environment Files",id:"environment-files"},{depth:2,value:"Docker Compose Files",id:"docker-compose-files"},{depth:4,value:"Additional environment properties:",id:"additional-environment-properties"},{depth:2,value:"Run Yaci Store ALL application",id:"run-yaci-store-all-application"},{depth:2,value:"Run Utxo Indexer application",id:"run-utxo-indexer-application"},{depth:2,value:"Run Aggregation App to calculate account balances",id:"run-aggregation-app-to-calculate-account-balances"},{depth:2,value:"Enable Submit Endpoint",id:"enable-submit-endpoint"}];function c(e){let n=Object.assign({h1:"h1",p:"p",a:"a",strong:"strong",ul:"ul",li:"li",h2:"h2",code:"code",h4:"h4",pre:"pre",span:"span"},(0,a.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"Run with Docker Compose"}),"\n",(0,t.jsxs)(n.p,{children:["You can run out-of-the-box applications with Docker Compose. The Docker Compose YAML files for the applications are inside\nthe ",(0,t.jsx)(n.a,{href:"https://github.com/bloxbean/yaci-store/tree/main/docker",children:(0,t.jsx)(n.strong,{children:"docker"})})," folder in GitHub repository."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Please ",(0,t.jsx)(n.strong,{children:"clone"})," the ",(0,t.jsx)(n.a,{href:"https://github.com/bloxbean/yaci-store",children:"repository"})," to access the Docker Compose files."]}),"\n",(0,t.jsx)(n.li,{children:"Verify compose yaml file are pointing to the correct application image version."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Docker"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"environment-files",children:"Environment Files"}),"\n",(0,t.jsxs)(n.p,{children:["The minimum required environment variables are stored in two environment files: ",(0,t.jsx)(n.code,{children:"env"})," and ",(0,t.jsx)(n.code,{children:"env-aggr"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"env"})," file is a common environment file for all applications. You can set the shared environment variables in this file."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"env-aggr"})," file is specific to the Aggregation application. You can set the Aggregation app specific environment variables in this file."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Please configure Cardano ",(0,t.jsx)(n.strong,{children:"Host"}),", ",(0,t.jsx)(n.strong,{children:"Port"}),", and ",(0,t.jsx)(n.strong,{children:"Protocol magic"})," in the ",(0,t.jsx)(n.code,{children:"env"})," file."]}),"\n",(0,t.jsx)(n.h2,{id:"docker-compose-files",children:"Docker Compose Files"}),"\n",(0,t.jsxs)(n.p,{children:["In the following sections, we will use ",(0,t.jsx)(n.code,{children:"*-monolith.yml"})," files. These files help to run both Postgres and the application\nthrough a single Docker Compose file. If you want to run the application with an external database, you can use application-specific\nDocker Compose files, such as ",(0,t.jsx)(n.code,{children:"yaci-store-all.yml"}),", ",(0,t.jsx)(n.code,{children:"yaci-store-utxo-indexer.yml"}),", or ",(0,t.jsx)(n.code,{children:"yaci-store-aggregation.yml"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"additional-environment-properties",children:"Additional environment properties:"}),"\n",(0,t.jsxs)(n.p,{children:["Check the ",(0,t.jsx)(n.a,{href:"https://github.com/bloxbean/yaci-store/tree/main/config",children:"application.properties"})," file for additional optional environment properties."]}),"\n",(0,t.jsx)(n.h2,{id:"run-yaci-store-all-application",children:"Run Yaci Store ALL application"}),"\n",(0,t.jsxs)(n.p,{children:["This application includes ",(0,t.jsx)(n.strong,{children:"all"})," stores."]}),"\n",(0,t.jsxs)(n.p,{children:["By ",(0,t.jsx)(n.strong,{children:"default"}),", the ",(0,t.jsx)(n.strong,{children:"submit"})," endpoint is disabled. You can refer to the ",(0,t.jsx)(n.a,{href:"#enable-submit-endpoint",children:"Enable Submit Endpoint"})," section for instructions on how to enable it."]}),"\n",(0,t.jsx)(n.p,{children:"One of the advantages of Yaci Store is that you can decide what data to store. If you want to disable any specific store\nor its API endpoints, you have that flexibility."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["To disable a specific store, you can set the ",(0,t.jsx)(n.code,{children:"STORE_<STORE_NAME>_ENABLED"})," environment variable to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["To disable a specific store's API endpoints, you can set the ",(0,t.jsx)(n.code,{children:"STORE_<STORE_NAME>_API_ENABLED"})," environment variable to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," It also includes the ",(0,t.jsx)(n.strong,{children:"account"})," aggregation module, but it is disabled by default. Instead of enabling this module,\nit's recommended to run the ",(0,t.jsx)(n.strong,{children:"aggregation-app"})," separately for calculating account balances."]}),"\n",(0,t.jsx)(n.pre,{"data-language":"shell","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"shell","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-all-monolith.yml"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,t.jsxs)(n.p,{children:["You can access swagger-ui at ",(0,t.jsx)(n.a,{href:"http://localhost:8080/swagger-ui/index.html",children:"http://localhost:8080/swagger-ui/index.html"})]}),"\n",(0,t.jsx)(n.h2,{id:"run-utxo-indexer-application",children:"Run Utxo Indexer application"}),"\n",(0,t.jsxs)(n.p,{children:["The Utxo Indexer application consists of the ",(0,t.jsx)(n.strong,{children:"utxo store"}),", ",(0,t.jsx)(n.strong,{children:"epoch store"}),", and ",(0,t.jsx)(n.strong,{children:"submit"})," component."]}),"\n",(0,t.jsxs)(n.p,{children:["By ",(0,t.jsx)(n.strong,{children:"default"}),", the ",(0,t.jsx)(n.strong,{children:"submit"})," endpoint is disabled. You can refer to the ",(0,t.jsx)(n.a,{href:"#enable-submit-endpoint",children:"Enable Submit Endpoint"}),"  section for instructions on how to enable it."]}),"\n",(0,t.jsx)(n.pre,{"data-language":"shell","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"shell","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-utxo-indexer-monolith.yml"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,t.jsx)(n.h2,{id:"run-aggregation-app-to-calculate-account-balances",children:"Run Aggregation App to calculate account balances"}),"\n",(0,t.jsx)(n.p,{children:"Aggregation App is a separate application that calculates account balances by aggregating the UTXO store data."}),"\n",(0,t.jsx)(n.pre,{"data-language":"shell","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"shell","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"yaci-store-aggregation-monolith.yml"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),"\n",(0,t.jsx)(n.h2,{id:"enable-submit-endpoint",children:"Enable Submit Endpoint"}),"\n",(0,t.jsxs)(n.p,{children:["Both the ",(0,t.jsx)(n.strong,{children:"yaci-store-all"})," and ",(0,t.jsx)(n.strong,{children:"yaci-store-utxo-indexer"})," applications provide ",(0,t.jsx)(n.strong,{children:"submit"})," and ",(0,t.jsx)(n.strong,{children:"script cost evaluation"})," endpoints.\nHowever, these endpoints are disabled by default."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["To enable the ",(0,t.jsx)(n.strong,{children:"submit"})," endpoint, you need to configure the ",(0,t.jsx)(n.code,{children:"STORE_CARDANO_SUBMIT_API_URL"})," endpoint in the ",(0,t.jsx)(n.code,{children:"env"})," file."]}),"\n",(0,t.jsxs)(n.li,{children:["To enable both the ",(0,t.jsx)(n.strong,{children:"submit"})," and ",(0,t.jsx)(n.strong,{children:"script cost evaluation"})," endpoints, you need to set the ",(0,t.jsx)(n.code,{children:"STORE_CARDANO_OGMIOS_URL"})," in the ",(0,t.jsx)(n.code,{children:"env"})," file."]}),"\n"]})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.a)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/docker.mdx",route:"/docker",timestamp:171552801e4,pageMap:[{kind:"Meta",data:{index:"Overview",design:"Design",docker:"Docker",build_run:"Build & Run",usage:{title:"Usage"},stores:"Stores",about:{title:"About",type:"page"}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"stores",route:"/stores",children:[{kind:"MdxPage",name:"overview",route:"/stores/overview"},{kind:"Meta",data:{overview:"Overview"}}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{"getting-started-as-library":"As Library","getting-started-out-of-box":"Out of Box Indexers","aggregation-app-getting-started":"Aggregation App (Account Balance)"}},{kind:"MdxPage",name:"aggregation-app-getting-started",route:"/usage/aggregation-app-getting-started"},{kind:"MdxPage",name:"getting-started-as-library",route:"/usage/getting-started-as-library"},{kind:"MdxPage",name:"getting-started-out-of-box",route:"/usage/getting-started-out-of-box"}]}],flexsearch:{codeblocks:!0},title:"Run with Docker Compose",headings:l},pageNextRoute:"/docker",nextraLayout:s.ZP,themeConfig:r.Z};n.default=(0,o.j)(d)},2069:function(e,n,i){"use strict";var t=i(5893);i(7294);let o={logo:(0,t.jsx)("span",{children:(0,t.jsx)("b",{children:"Yaci Store"})}),project:{link:"https://github.com/bloxbean/yaci-store"},chat:{link:"https://discord.gg/JtQ54MSw6p"},docsRepositoryBase:"https://github.com/bloxbean/yaci-store/tree/main/docs",footer:{text:"\xa9 2024 BloxBean project"},useNextSeoProps:()=>({titleTemplate:"%s â€“ Yaci Store"}),head:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("meta",{property:"description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,t.jsx)("meta",{property:"og:title",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"}),(0,t.jsx)("meta",{property:"og:description",content:"Yaci Store - A modular Java library for developers who are keen on building their own custom indexer for Cardano"})]})};n.Z=o},5789:function(){}},function(e){e.O(0,[955,888,774,179],function(){return e(e.s=4102)}),_N_E=e.O()}]);