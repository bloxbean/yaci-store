import { Callout } from 'nextra/components'

# Context Variables Quick Reference

**Quick lookup for all built-in variables available in your plugins**

## Variable Summary Table

| Variable | Type | Purpose | Quick Example |
|----------|------|---------|---------------|
| **`named_jdbc`** | NamedParameterJdbcTemplate | SQL queries with named parameters (recommended) | `named_jdbc.queryForMap("SELECT * FROM table WHERE id = :id", ["id": 123])` |
| **`http`** | PluginHttpClient | HTTP requests with retry support | `http.get("https://api.example.com/data")` |
| **`files`** | PluginFileClient | File I/O operations | `files.read("config.json")` |
| **`state`** | State | Plugin-specific persistent storage | `state.put("lastBlock", 12345)` |
| **`global_state`** | State | Global storage shared across plugins | `global_state.get("networkTip")` |
| **`env`** | Environment | Access configuration properties | `env.getProperty("api.key")` |

## Which Variable Should I Use?

### For Database Operations
- **Need to query the database?** â†’ Use `named_jdbc`
- [ðŸ“– Full Database Guide](./database-access)

### For HTTP/API Calls
- **Need to call external APIs?** â†’ Use `http`
- [ðŸ“– Full HTTP Client Guide](./http-client)

### For File Operations
- **Need to read/write files?** â†’ Use `files`
- **Working with JSON/CSV?** â†’ `files` has built-in support
- [ðŸ“– Full File Operations Guide](./file-operations)

### For State Management
- **Store data for this plugin only?** â†’ Use `state`
- **Share data between plugins?** â†’ Use `global_state`
- **Need atomic operations?** â†’ Both support atomic methods
- [ðŸ“– Full State Management Guide](./state-management)

### For Configuration
- **Need environment variables or properties?** â†’ Use `env`
- [ðŸ“– Full Configuration Guide](./configuration)

## Common Code Patterns

### Database Query with Results
```javascript
// MVEL - Get count from database
params = ["status": "active"];
result = named_jdbc.queryForMap(
    "SELECT COUNT(*) as count FROM users WHERE status = :status",
    params
);
count = result["count"];
```

### HTTP POST with Retry
```javascript
// JavaScript - Send webhook with automatic retry
const response = http.postJson("https://webhook.site/unique-id",
    {
        event: "user_action",
        count: eventCount
    });
```

### State with Atomic Counter
```javascript
// MVEL - Track processed items
itemCount = state.increment("items_processed");
if (itemCount % 100 == 0) {
    log.info("Processed " + itemCount + " items");
}
```

### File Operations with JSON
```javascript
// JavaScript - Read config and write results
const config = files.readJson("config.json");
if (config.isSuccess()) {
    const settings = config.getData();
    // Process with settings...
    files.writeJson("output.json", results);
}
```
