# Integration Test Configuration for MCP Server Aggregation Tests
# This configuration connects to a real database for integration testing

# Database Configuration - Override these via environment variables or system properties
# Example: -Dtest.db.host=localhost -Dtest.db.port=54333
test.db.host=localhost
test.db.port=54333
test.db.name=yaci_store
test.db.schema=preprod2
test.db.username=yaci
test.db.password=dbpass

# Spring DataSource Configuration
spring.datasource.url=jdbc:postgresql://${test.db.host}:${test.db.port}/${test.db.name}?currentSchema=${test.db.schema}
spring.datasource.username=${test.db.username}
spring.datasource.password=${test.db.password}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings for tests
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000

# JPA settings
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# Disable auto-configuration that's not needed for tests
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\
  org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration

# Enable MCP Server Aggregation
store.utxo.enabled=true
store.mcp-server.aggregation.enabled=true
store.mcp-server.aggregation.predefined.enabled=true

# Test Data Configuration
# Real addresses from preprod2 database
test.data.address.high-utxo=addr_test1qqtu7g3e7pqwt9f4dqlkme9qj80cejr5v0jwugthywvgjyyxn4dgcgtv9swlj6snz3cdx59ru4u7mhrvg5rl50wunlls5z3e57
test.data.address.medium-utxo=addr_test1qqz6ehaxt9f2eznmpnck34y3y56mz9l4nxyk0mn5yezde3q9h3vaj3m9ddqk0kzyjuy96dettrm5kgzherz59gguy2lqz0lkfh
test.data.stake-address=stake_test1uzrf6k5vy9kzc80edgf3guxn2z37270dm3ky2pl68hwfllcx9glcc
test.data.asset.unit=0000001c1f5134859ee40556e75834b9929d1b393ab94858a3d27ae0424541434f4e

# Epoch range for testing
test.data.epoch.latest=246
test.data.epoch.historical=240
test.data.epoch.range-start=240
test.data.epoch.range-end=242

# Logging
logging.level.com.bloxbean.cardano.yaci.store.mcp.server.aggregation=DEBUG
logging.level.org.springframework.jdbc.core=DEBUG
